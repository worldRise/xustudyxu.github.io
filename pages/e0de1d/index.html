<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL | xustudyxu&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?e1aa9d15d62220ec692a843c08c79000";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>        
    </script>
    <script src="https://fastly.jsdelivr.net/npm/twikoo@1.5.11/dist/twikoo.all.min.js"></script>
    <script href="./js/index.js" async="async"></script>
    <link rel="icon" href="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/20220627/mmexport1656324824543.124zxwkqyzlc.webp">
    <script charset="utf-8" href="./js/main.js"></script>
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3077305_pt8umhrn4k9.css">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <meta name="description" content="学习视频地址">
    <meta name="image" content="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/01.png">
    <meta name="twitter:title" content="MySQL">
    <meta name="twitter:description" content="学习视频地址">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/01.png">
    <meta name="twitter:url" content="https://frxcat.fun/studynotes/database/MySQL/MySQL.html">
    <meta name="twitter:site" content="@frxcat">
    <meta property="og:type" content="article">
    <meta property="og:title" content="MySQL">
    <meta property="og:description" content="学习视频地址">
    <meta property="og:image" content="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/01.png">
    <meta property="og:url" content="https://frxcat.fun/studynotes/database/MySQL/MySQL.html">
    <meta property="og:site_name" content="frxcat">
    <meta property="article:published_time" content="2021-12-20T18:44:18.000Z">
    <meta property="article:tag" content="MySQL">
    <meta itemprop="name" content="MySQL">
    <meta itemprop="description" content="学习视频地址">
    <meta itemprop="image" content="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/01.png">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="preload" href="/assets/css/0.styles.bbd63440.css" as="style"><link rel="preload" href="/assets/js/app.b0983bf9.js" as="script"><link rel="preload" href="/assets/js/2.f07a9fcd.js" as="script"><link rel="preload" href="/assets/js/167.4922f385.js" as="script"><link rel="preload" href="/assets/js/5.8c6a5cb9.js" as="script"><link rel="preload" href="/assets/js/13.671a58b6.js" as="script"><link rel="preload" href="/assets/js/14.8128dda5.js" as="script"><link rel="preload" href="/assets/js/9.adcbe568.js" as="script"><link rel="preload" href="/assets/js/10.92006054.js" as="script"><link rel="prefetch" href="/assets/js/100.86daf9bc.js"><link rel="prefetch" href="/assets/js/101.97c61b0c.js"><link rel="prefetch" href="/assets/js/102.b49277e8.js"><link rel="prefetch" href="/assets/js/103.b9bbe6d2.js"><link rel="prefetch" href="/assets/js/104.9e031b3d.js"><link rel="prefetch" href="/assets/js/105.5cdb2a31.js"><link rel="prefetch" href="/assets/js/106.1c31a6c9.js"><link rel="prefetch" href="/assets/js/107.c74c341d.js"><link rel="prefetch" href="/assets/js/108.af1ead9a.js"><link rel="prefetch" href="/assets/js/109.784e799d.js"><link rel="prefetch" href="/assets/js/11.c91662fe.js"><link rel="prefetch" href="/assets/js/110.1aff099a.js"><link rel="prefetch" href="/assets/js/111.6a5f3ad4.js"><link rel="prefetch" href="/assets/js/112.b930471d.js"><link rel="prefetch" href="/assets/js/113.5944b299.js"><link rel="prefetch" href="/assets/js/114.6527a7ff.js"><link rel="prefetch" href="/assets/js/115.1cfc09a4.js"><link rel="prefetch" href="/assets/js/116.64cc2f9e.js"><link rel="prefetch" href="/assets/js/117.d700dc28.js"><link rel="prefetch" href="/assets/js/118.f862ba67.js"><link rel="prefetch" href="/assets/js/119.6b683361.js"><link rel="prefetch" href="/assets/js/12.3f00f85a.js"><link rel="prefetch" href="/assets/js/120.a925403d.js"><link rel="prefetch" href="/assets/js/121.0e0ba2b2.js"><link rel="prefetch" href="/assets/js/122.930953ad.js"><link rel="prefetch" href="/assets/js/123.45df1ed7.js"><link rel="prefetch" href="/assets/js/124.4d66fa8f.js"><link rel="prefetch" href="/assets/js/125.e1920d8d.js"><link rel="prefetch" href="/assets/js/126.9bc32124.js"><link rel="prefetch" href="/assets/js/127.49a90e51.js"><link rel="prefetch" href="/assets/js/128.9cbb4ea0.js"><link rel="prefetch" href="/assets/js/129.401df337.js"><link rel="prefetch" href="/assets/js/130.f9216b2b.js"><link rel="prefetch" href="/assets/js/131.c19f81cf.js"><link rel="prefetch" href="/assets/js/132.ba1ce6a6.js"><link rel="prefetch" href="/assets/js/133.57f55bb0.js"><link rel="prefetch" href="/assets/js/134.91d160b0.js"><link rel="prefetch" href="/assets/js/135.7ec0af82.js"><link rel="prefetch" href="/assets/js/136.8f72b3b9.js"><link rel="prefetch" href="/assets/js/137.a0541cc8.js"><link rel="prefetch" href="/assets/js/138.8de96054.js"><link rel="prefetch" href="/assets/js/139.6dab6e70.js"><link rel="prefetch" href="/assets/js/140.5525156b.js"><link rel="prefetch" href="/assets/js/141.c136b702.js"><link rel="prefetch" href="/assets/js/142.ff4f5708.js"><link rel="prefetch" href="/assets/js/143.695dcaa0.js"><link rel="prefetch" href="/assets/js/144.dba18e54.js"><link rel="prefetch" href="/assets/js/145.8d67a7d1.js"><link rel="prefetch" href="/assets/js/146.f3c0deb2.js"><link rel="prefetch" href="/assets/js/147.113323ed.js"><link rel="prefetch" href="/assets/js/148.4eb2a79d.js"><link rel="prefetch" href="/assets/js/149.e21526b1.js"><link rel="prefetch" href="/assets/js/15.1887ca96.js"><link rel="prefetch" href="/assets/js/150.cecc3d88.js"><link rel="prefetch" href="/assets/js/151.4d2508b3.js"><link rel="prefetch" href="/assets/js/152.904db8d9.js"><link rel="prefetch" href="/assets/js/153.4385da42.js"><link rel="prefetch" href="/assets/js/154.f28ad0ae.js"><link rel="prefetch" href="/assets/js/155.2ff5153d.js"><link rel="prefetch" href="/assets/js/156.b0ea6d59.js"><link rel="prefetch" href="/assets/js/157.1a87f5bb.js"><link rel="prefetch" href="/assets/js/158.3ba68b26.js"><link rel="prefetch" href="/assets/js/159.4e326e1e.js"><link rel="prefetch" href="/assets/js/16.82e3a1e9.js"><link rel="prefetch" href="/assets/js/160.455d7908.js"><link rel="prefetch" href="/assets/js/161.9ab0e5c0.js"><link rel="prefetch" href="/assets/js/162.2ddddb4b.js"><link rel="prefetch" href="/assets/js/163.bddfb3f7.js"><link rel="prefetch" href="/assets/js/164.ef808a67.js"><link rel="prefetch" href="/assets/js/165.832dae8e.js"><link rel="prefetch" href="/assets/js/166.49e3d986.js"><link rel="prefetch" href="/assets/js/168.06dec96a.js"><link rel="prefetch" href="/assets/js/169.d4427ad2.js"><link rel="prefetch" href="/assets/js/17.6c75b4ae.js"><link rel="prefetch" href="/assets/js/170.a7b6a8d5.js"><link rel="prefetch" href="/assets/js/171.9e386c9a.js"><link rel="prefetch" href="/assets/js/172.4555e22a.js"><link rel="prefetch" href="/assets/js/173.e646817a.js"><link rel="prefetch" href="/assets/js/174.bbbe1f62.js"><link rel="prefetch" href="/assets/js/175.7a695188.js"><link rel="prefetch" href="/assets/js/176.c864c5d2.js"><link rel="prefetch" href="/assets/js/177.526c52c5.js"><link rel="prefetch" href="/assets/js/178.6c6733fb.js"><link rel="prefetch" href="/assets/js/179.eed66858.js"><link rel="prefetch" href="/assets/js/18.0135bd34.js"><link rel="prefetch" href="/assets/js/180.d7bf9d0a.js"><link rel="prefetch" href="/assets/js/181.12728956.js"><link rel="prefetch" href="/assets/js/182.5120b4e7.js"><link rel="prefetch" href="/assets/js/183.97ca32bd.js"><link rel="prefetch" href="/assets/js/184.94c68d5d.js"><link rel="prefetch" href="/assets/js/185.b2496d62.js"><link rel="prefetch" href="/assets/js/186.672f452e.js"><link rel="prefetch" href="/assets/js/187.15a18d99.js"><link rel="prefetch" href="/assets/js/188.fc62e658.js"><link rel="prefetch" href="/assets/js/189.cd4023b1.js"><link rel="prefetch" href="/assets/js/19.5eaaeb7d.js"><link rel="prefetch" href="/assets/js/190.19174320.js"><link rel="prefetch" href="/assets/js/191.27885c91.js"><link rel="prefetch" href="/assets/js/192.856bf0c3.js"><link rel="prefetch" href="/assets/js/193.0f8c37e2.js"><link rel="prefetch" href="/assets/js/194.3840c234.js"><link rel="prefetch" href="/assets/js/195.1e4a714b.js"><link rel="prefetch" href="/assets/js/196.c09c8d49.js"><link rel="prefetch" href="/assets/js/197.4c50a7c0.js"><link rel="prefetch" href="/assets/js/198.45ab389c.js"><link rel="prefetch" href="/assets/js/199.7e47fa3b.js"><link rel="prefetch" href="/assets/js/20.ac34fd40.js"><link rel="prefetch" href="/assets/js/200.aca6d254.js"><link rel="prefetch" href="/assets/js/201.6eab6e3a.js"><link rel="prefetch" href="/assets/js/202.8f2663f5.js"><link rel="prefetch" href="/assets/js/203.7573daa5.js"><link rel="prefetch" href="/assets/js/204.7aab6103.js"><link rel="prefetch" href="/assets/js/205.357216ff.js"><link rel="prefetch" href="/assets/js/206.4bda4d98.js"><link rel="prefetch" href="/assets/js/207.eed8bfd3.js"><link rel="prefetch" href="/assets/js/208.f5eafcb6.js"><link rel="prefetch" href="/assets/js/209.4709ecf2.js"><link rel="prefetch" href="/assets/js/21.fc010263.js"><link rel="prefetch" href="/assets/js/210.79c8c46b.js"><link rel="prefetch" href="/assets/js/211.dd9b6866.js"><link rel="prefetch" href="/assets/js/212.cfee3724.js"><link rel="prefetch" href="/assets/js/213.df2dcfa8.js"><link rel="prefetch" href="/assets/js/214.f88187b9.js"><link rel="prefetch" href="/assets/js/215.8709d8e7.js"><link rel="prefetch" href="/assets/js/216.45438880.js"><link rel="prefetch" href="/assets/js/217.4da35637.js"><link rel="prefetch" href="/assets/js/218.8e3c7fb9.js"><link rel="prefetch" href="/assets/js/219.6d6ec52d.js"><link rel="prefetch" href="/assets/js/22.05fac603.js"><link rel="prefetch" href="/assets/js/220.2009fdd2.js"><link rel="prefetch" href="/assets/js/221.f12d98a3.js"><link rel="prefetch" href="/assets/js/222.3e612f68.js"><link rel="prefetch" href="/assets/js/223.bea11260.js"><link rel="prefetch" href="/assets/js/224.fba25cac.js"><link rel="prefetch" href="/assets/js/225.25017c01.js"><link rel="prefetch" href="/assets/js/226.49385da8.js"><link rel="prefetch" href="/assets/js/227.f47a081f.js"><link rel="prefetch" href="/assets/js/228.d630ee2e.js"><link rel="prefetch" href="/assets/js/229.1bb387a7.js"><link rel="prefetch" href="/assets/js/23.2421c9d8.js"><link rel="prefetch" href="/assets/js/230.fe878b53.js"><link rel="prefetch" href="/assets/js/231.e83840c5.js"><link rel="prefetch" href="/assets/js/232.f83da0fc.js"><link rel="prefetch" href="/assets/js/233.50060e9f.js"><link rel="prefetch" href="/assets/js/234.3f22ec3d.js"><link rel="prefetch" href="/assets/js/235.fee36716.js"><link rel="prefetch" href="/assets/js/236.21b664d0.js"><link rel="prefetch" href="/assets/js/237.ca58f846.js"><link rel="prefetch" href="/assets/js/238.d3eefcdf.js"><link rel="prefetch" href="/assets/js/239.d23110c4.js"><link rel="prefetch" href="/assets/js/24.fe9664ce.js"><link rel="prefetch" href="/assets/js/240.00524f7f.js"><link rel="prefetch" href="/assets/js/241.409940c7.js"><link rel="prefetch" href="/assets/js/242.dbf579b9.js"><link rel="prefetch" href="/assets/js/243.6253c5b3.js"><link rel="prefetch" href="/assets/js/244.784d9dc8.js"><link rel="prefetch" href="/assets/js/245.65fced22.js"><link rel="prefetch" href="/assets/js/246.f8f2b1c5.js"><link rel="prefetch" href="/assets/js/247.2c8c0c28.js"><link rel="prefetch" href="/assets/js/248.ba2aaea1.js"><link rel="prefetch" href="/assets/js/249.7db5123c.js"><link rel="prefetch" href="/assets/js/25.e7259641.js"><link rel="prefetch" href="/assets/js/250.6ffa43c0.js"><link rel="prefetch" href="/assets/js/251.cbc63c58.js"><link rel="prefetch" href="/assets/js/252.f377284a.js"><link rel="prefetch" href="/assets/js/253.5bb6cabb.js"><link rel="prefetch" href="/assets/js/254.2d9b8b56.js"><link rel="prefetch" href="/assets/js/255.75fe4cde.js"><link rel="prefetch" href="/assets/js/256.ae0af974.js"><link rel="prefetch" href="/assets/js/257.ecf4e875.js"><link rel="prefetch" href="/assets/js/258.eac6280c.js"><link rel="prefetch" href="/assets/js/259.98dbe3b1.js"><link rel="prefetch" href="/assets/js/26.d40c2a1a.js"><link rel="prefetch" href="/assets/js/260.625886f3.js"><link rel="prefetch" href="/assets/js/261.4d8c4706.js"><link rel="prefetch" href="/assets/js/27.8a98ed56.js"><link rel="prefetch" href="/assets/js/28.50b2015e.js"><link rel="prefetch" href="/assets/js/29.02675312.js"><link rel="prefetch" href="/assets/js/3.83ced8af.js"><link rel="prefetch" href="/assets/js/30.a4960c4f.js"><link rel="prefetch" href="/assets/js/31.c988d346.js"><link rel="prefetch" href="/assets/js/32.17e9d1ff.js"><link rel="prefetch" href="/assets/js/33.f3d4eb2f.js"><link rel="prefetch" href="/assets/js/34.4eb1ceaa.js"><link rel="prefetch" href="/assets/js/35.90da0b52.js"><link rel="prefetch" href="/assets/js/36.4cecb618.js"><link rel="prefetch" href="/assets/js/37.4c89f57b.js"><link rel="prefetch" href="/assets/js/38.c96ad289.js"><link rel="prefetch" href="/assets/js/39.46958d26.js"><link rel="prefetch" href="/assets/js/4.d18655dd.js"><link rel="prefetch" href="/assets/js/40.5e885fac.js"><link rel="prefetch" href="/assets/js/41.c2f13996.js"><link rel="prefetch" href="/assets/js/42.4a192f91.js"><link rel="prefetch" href="/assets/js/43.ec78a5e1.js"><link rel="prefetch" href="/assets/js/44.42197911.js"><link rel="prefetch" href="/assets/js/45.28800d78.js"><link rel="prefetch" href="/assets/js/46.ee1b1ddb.js"><link rel="prefetch" href="/assets/js/47.02c55b3b.js"><link rel="prefetch" href="/assets/js/48.9f7178b3.js"><link rel="prefetch" href="/assets/js/49.42db6206.js"><link rel="prefetch" href="/assets/js/50.391cc3cf.js"><link rel="prefetch" href="/assets/js/51.2b9d6247.js"><link rel="prefetch" href="/assets/js/52.5c4c166a.js"><link rel="prefetch" href="/assets/js/53.35d3dcf3.js"><link rel="prefetch" href="/assets/js/54.f0e7d027.js"><link rel="prefetch" href="/assets/js/55.d86134ab.js"><link rel="prefetch" href="/assets/js/56.a85667f3.js"><link rel="prefetch" href="/assets/js/57.972edfde.js"><link rel="prefetch" href="/assets/js/58.feff0d71.js"><link rel="prefetch" href="/assets/js/59.ae3a6ef5.js"><link rel="prefetch" href="/assets/js/6.f2375c8d.js"><link rel="prefetch" href="/assets/js/60.321f24d9.js"><link rel="prefetch" href="/assets/js/61.1ff838fd.js"><link rel="prefetch" href="/assets/js/62.9ec04e94.js"><link rel="prefetch" href="/assets/js/63.8ba11734.js"><link rel="prefetch" href="/assets/js/64.0e73f9e5.js"><link rel="prefetch" href="/assets/js/65.52b0d0e1.js"><link rel="prefetch" href="/assets/js/66.9e694afc.js"><link rel="prefetch" href="/assets/js/67.6e51dda6.js"><link rel="prefetch" href="/assets/js/68.f91f3005.js"><link rel="prefetch" href="/assets/js/69.861ae0ff.js"><link rel="prefetch" href="/assets/js/7.e6a93dce.js"><link rel="prefetch" href="/assets/js/70.18111a21.js"><link rel="prefetch" href="/assets/js/71.6c8529e9.js"><link rel="prefetch" href="/assets/js/72.47450eb1.js"><link rel="prefetch" href="/assets/js/73.9c635a52.js"><link rel="prefetch" href="/assets/js/74.73fa2372.js"><link rel="prefetch" href="/assets/js/75.48a577d7.js"><link rel="prefetch" href="/assets/js/76.4fd71390.js"><link rel="prefetch" href="/assets/js/77.b4b26744.js"><link rel="prefetch" href="/assets/js/78.0f2d6f60.js"><link rel="prefetch" href="/assets/js/79.3bbba066.js"><link rel="prefetch" href="/assets/js/8.656fb656.js"><link rel="prefetch" href="/assets/js/80.d040290c.js"><link rel="prefetch" href="/assets/js/81.116a1f5a.js"><link rel="prefetch" href="/assets/js/82.32bbba23.js"><link rel="prefetch" href="/assets/js/83.fa77d6fb.js"><link rel="prefetch" href="/assets/js/84.a25b28b6.js"><link rel="prefetch" href="/assets/js/85.522160c0.js"><link rel="prefetch" href="/assets/js/86.c960416b.js"><link rel="prefetch" href="/assets/js/87.b7c5ab5a.js"><link rel="prefetch" href="/assets/js/88.cb7e48dc.js"><link rel="prefetch" href="/assets/js/89.6edbcc03.js"><link rel="prefetch" href="/assets/js/90.9596df85.js"><link rel="prefetch" href="/assets/js/91.cc94639d.js"><link rel="prefetch" href="/assets/js/92.25bb9a00.js"><link rel="prefetch" href="/assets/js/93.58d84e60.js"><link rel="prefetch" href="/assets/js/94.ec46a25e.js"><link rel="prefetch" href="/assets/js/95.78521d38.js"><link rel="prefetch" href="/assets/js/96.ef8a4421.js"><link rel="prefetch" href="/assets/js/97.f96db659.js"><link rel="prefetch" href="/assets/js/98.6aaddf34.js"><link rel="prefetch" href="/assets/js/99.654de47f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bbd63440.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">xustudyxu's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/pages/f6054a/" class="nav-link">导航🚀​</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e05ef5/" class="nav-link">JavaSE</a></li></ul></li><li class="dropdown-item"><h4>JavaWeb</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8f83ba/" class="nav-link">Servlet</a></li><li class="dropdown-subitem"><a href="/pages/8bc1c4/" class="nav-link">MVC</a></li><li class="dropdown-subitem"><a href="/pages/f883e2/" class="nav-link">filter|listener</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring生态" class="dropdown-title"><!----> <span class="title" style="display:;">Spring生态</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/462a90/" class="nav-link">Spring5</a></li><li class="dropdown-item"><!----> <a href="/pages/2e990c/" class="nav-link">SpringMVC</a></li><li class="dropdown-item"><!----> <a href="/pages/0d4af0/" class="nav-link">SpringBoot2</a></li><li class="dropdown-item"><!----> <a href="/pages/870083/" class="nav-link">SpringCloud</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title" style="display:;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>搜索引擎</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/596552/" class="nav-link">ElasticSearch</a></li></ul></li><li class="dropdown-item"><h4>消息队列</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e645d9/" class="nav-link">RabbitMQ</a></li></ul></li><li class="dropdown-item"><h4>服务器</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9551ee/" class="nav-link">Nginx🌐</a></li></ul></li><li class="dropdown-item"><h4>服务框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/48771f/" class="nav-link">Dubbo</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><!----> <span class="title" style="display:;">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Python</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b9268d/" class="nav-link">Python基础</a></li><li class="dropdown-subitem"><a href="/pages/e0bd06/" class="nav-link">数据分析</a></li></ul></li><li class="dropdown-item"><h4>环境搭建</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/600247/" class="nav-link">Hadoop集群</a></li><li class="dropdown-subitem"><a href="/pages/cdeb68/" class="nav-link">KVM虚拟化技术</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e0de1d/" aria-current="page" class="nav-link router-link-exact-active router-link-active">MySQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7ab056/" class="nav-link">NoSQL数据库概论</a></li><li class="dropdown-subitem"><a href="/pages/e9cc9f/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/pages/91197c/" class="nav-link">MongoDB</a></li><li class="dropdown-subitem"><a href="/pages/2aae92/" class="nav-link">HBase</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/0e424f/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/pages/e0594a/" class="nav-link">MyBatis-Plus</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><!----> <span class="title" style="display:;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/99e9dc/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/pages/45eca1/" class="nav-link">Maven</a></li><li class="dropdown-item"><!----> <a href="/pages/34892c/" class="nav-link">Git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><!----> <span class="title" style="display:;">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/40ee62/" class="nav-link">力扣算法题</a></li><li class="dropdown-item"><!----> <a href="/pages/39558d/" class="nav-link">初级开发篇</a></li><li class="dropdown-item"><!----> <a href="/pages/41f848/" class="nav-link">中高进阶篇</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/myfriends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="本站" class="dropdown-title"><!----> <span class="title" style="display:;">本站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>索引</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9013e4/" class="nav-link">关于</a></li></ul></li></ul></div></div> <a href="https://github.com/xustudyxu/xustudyxu.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/20220627/mmexport1656324824543.124zxwkqyzlc.webp"> <div class="blogger-info"><h3>xustudyxu</h3> <span>一起学习编程!</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/pages/f6054a/" class="nav-link">导航🚀​</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e05ef5/" class="nav-link">JavaSE</a></li></ul></li><li class="dropdown-item"><h4>JavaWeb</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8f83ba/" class="nav-link">Servlet</a></li><li class="dropdown-subitem"><a href="/pages/8bc1c4/" class="nav-link">MVC</a></li><li class="dropdown-subitem"><a href="/pages/f883e2/" class="nav-link">filter|listener</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring生态" class="dropdown-title"><!----> <span class="title" style="display:;">Spring生态</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/462a90/" class="nav-link">Spring5</a></li><li class="dropdown-item"><!----> <a href="/pages/2e990c/" class="nav-link">SpringMVC</a></li><li class="dropdown-item"><!----> <a href="/pages/0d4af0/" class="nav-link">SpringBoot2</a></li><li class="dropdown-item"><!----> <a href="/pages/870083/" class="nav-link">SpringCloud</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title" style="display:;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>搜索引擎</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/596552/" class="nav-link">ElasticSearch</a></li></ul></li><li class="dropdown-item"><h4>消息队列</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e645d9/" class="nav-link">RabbitMQ</a></li></ul></li><li class="dropdown-item"><h4>服务器</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9551ee/" class="nav-link">Nginx🌐</a></li></ul></li><li class="dropdown-item"><h4>服务框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/48771f/" class="nav-link">Dubbo</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><!----> <span class="title" style="display:;">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Python</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b9268d/" class="nav-link">Python基础</a></li><li class="dropdown-subitem"><a href="/pages/e0bd06/" class="nav-link">数据分析</a></li></ul></li><li class="dropdown-item"><h4>环境搭建</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/600247/" class="nav-link">Hadoop集群</a></li><li class="dropdown-subitem"><a href="/pages/cdeb68/" class="nav-link">KVM虚拟化技术</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e0de1d/" aria-current="page" class="nav-link router-link-exact-active router-link-active">MySQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7ab056/" class="nav-link">NoSQL数据库概论</a></li><li class="dropdown-subitem"><a href="/pages/e9cc9f/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/pages/91197c/" class="nav-link">MongoDB</a></li><li class="dropdown-subitem"><a href="/pages/2aae92/" class="nav-link">HBase</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/0e424f/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/pages/e0594a/" class="nav-link">MyBatis-Plus</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><!----> <span class="title" style="display:;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/99e9dc/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/pages/45eca1/" class="nav-link">Maven</a></li><li class="dropdown-item"><!----> <a href="/pages/34892c/" class="nav-link">Git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><!----> <span class="title" style="display:;">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/40ee62/" class="nav-link">力扣算法题</a></li><li class="dropdown-item"><!----> <a href="/pages/39558d/" class="nav-link">初级开发篇</a></li><li class="dropdown-item"><!----> <a href="/pages/41f848/" class="nav-link">中高进阶篇</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/myfriends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="本站" class="dropdown-title"><!----> <span class="title" style="display:;">本站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>索引</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9013e4/" class="nav-link">关于</a></li></ul></li></ul></div></div> <a href="https://github.com/xustudyxu/xustudyxu.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>MySQL</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/e0de1d/" aria-current="page" class="active sidebar-link">MySQL</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>NoSQL 数据库概论</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/7ab056/" class="sidebar-link">非关系型数据库</a></li><li><a href="/pages/8efc75/" class="sidebar-link">NoSQL数据库理论基础</a></li><li><a href="/pages/e2ef11/" class="sidebar-link">NoSQL数据库分类</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Redis</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/e9cc9f/" class="sidebar-link">Redis 数据库简介</a></li><li><a href="/database/Reids/Redis_install/" class="sidebar-link">Redis 概述安装</a></li><li><a href="/database/Reids/Redis_datatype/" class="sidebar-link">常用五大数据类型</a></li><li><a href="/database/Reids/Redis_conf/" class="sidebar-link">Redis 配置文件</a></li><li><a href="/database/Reids/Redis_PublishAndSubscribe/" class="sidebar-link">Redis 发布和订阅</a></li><li><a href="/database/Reids/Redis_Newdatatype/" class="sidebar-link">Redis 新数据类型</a></li><li><a href="/database/Reids/Redis_Java/" class="sidebar-link">Redis Java整合</a></li><li><a href="/database/Reids/Redis_AffairAndLock/" class="sidebar-link">Redis 事务与锁</a></li><li><a href="/database/Reids/Redis_Persistence/" class="sidebar-link">Redis 持久化操作</a></li><li><a href="/database/Reids/Redis_MasterSlaveCopy/" class="sidebar-link">Redis 主从复制</a></li><li><a href="/database/Reids/Redis_ClusterBuild/" class="sidebar-link">Redis 集群搭建</a></li><li><a href="/database/Reids/Redis_CacheProblem/" class="sidebar-link">Redis 缓存问题</a></li><li><a href="/database/Reids/Redis_Distributedlock/" class="sidebar-link">Redis 分布式锁</a></li><li><a href="/database/Reids/Redis_6newfunction/" class="sidebar-link">Redis 6.0新功能</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>MongoDB</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/91197c/" class="sidebar-link">MongoDB 相关概念</a></li><li><a href="/database/MongoDB/MongoDB_install/" class="sidebar-link">MongoDB 安装</a></li><li><a href="/database/MongoDB/MongoDB_command/" class="sidebar-link">MongoDB 常用命令</a></li><li><a href="/database/MongoDB/MongoDB_index/" class="sidebar-link">MongoDB 索引-Index</a></li><li><a href="/database/MongoDB/MongoDB_Java/" class="sidebar-link">MongoDB 整合Java案例</a></li><li><a href="/database/MongoDB/MongoDB_ClusterAndSecurity/" class="sidebar-link">MongoDB 集群和安全</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>HBase</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/2aae92/" class="sidebar-link">HBase简介</a></li><li><a href="/pages/e33def/" class="sidebar-link">HBase系统架构</a></li><li><a href="/pages/c23c27/" class="sidebar-link">HBase数据定义</a></li><li><a href="/pages/0ef396/" class="sidebar-link">HBase数据操作</a></li><li><a href="/pages/e16a48/" class="sidebar-link">HBase基本原理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>MyBatis</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/a7566d/" class="sidebar-link">MyBatis 入门案例</a></li><li><a href="/pages/ba216f/" class="sidebar-link">XML 配置</a></li><li><a href="/pages/c86777/" class="sidebar-link">XML 映射文件</a></li><li><a href="/pages/72d6fc/" class="sidebar-link">动态SQL</a></li><li><a href="/pages/c47d25/" class="sidebar-link">缓存</a></li><li><a href="/pages/b147f3/" class="sidebar-link">MyBatis的逆向工程</a></li><li><a href="/pages/ca7f77/" class="sidebar-link">分页插件</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>MyBatis-Plus</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/e0594a/" class="sidebar-link">MyBatis-Plus 简介</a></li><li><a href="/pages/7e2604/" class="sidebar-link">MyBatis-Plus 入门案例</a></li><li><a href="/pages/bcc63c/" class="sidebar-link">MyBatis-Plus 基本CRUD</a></li><li><a href="/pages/acce37/" class="sidebar-link">MyBatis-Plus 常用注解</a></li><li><a href="/pages/004342/" class="sidebar-link">条件构造器和常用接口</a></li><li><a href="/pages/160497/" class="sidebar-link">MyBatis-Plus 插件</a></li><li><a href="/pages/d70dfe/" class="sidebar-link">MyBatis-Plus 通用枚举</a></li><li><a href="/pages/b0e3b4/" class="sidebar-link">MyBatis-Plus 代码生成器</a></li><li><a href="/pages/575daf/" class="sidebar-link">MyBatis-Plus 多数据源</a></li><li><a href="/pages/8457cc/" class="sidebar-link">MyBatisX插件</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=studynotes" title="分类" data-v-06225672>studynotes</a></li><li data-v-06225672><a href="/categories/?category=database" title="分类" data-v-06225672>database</a></li><li data-v-06225672><a href="/categories/?category=MySQL" title="分类" data-v-06225672>MySQL</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="javascript:;" data-v-06225672>xu</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2021-12-20</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">MySQL<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="mysql"><a href="#mysql" class="header-anchor">#</a> MySQL</h1> <p><a href="https://www.bilibili.com/video/BV1fh411y7R8?from=search&amp;seid=8859201345785431941&amp;spm_id_from=333.337.0.0" target="_blank" rel="noopener noreferrer">学习视频地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="数据库三层结构"><a href="#数据库三层结构" class="header-anchor">#</a> 数据库三层结构</h2> <ol><li><font color="#DC4040" size="4" face="黑体">所谓安装Mysql数据库，就是在主机安装一个数据库管理系统(DBMS)，这个管理程序可以管理多个数据库。DBMS(database manage system)</font></li> <li><font color="#DC4040" size="4" face="黑体">一个数据库中可以创建多个表,以保存数据(信息)。</font></li> <li><font color="#DC4040" size="4" face="黑体">数据库管理系统(DBMS)、数据库和表的关系如图所示:示意图</font></li></ol> <p><img alt="01" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/01.png" loading="lazy" class="lazy"></p> <h2 id="数据在数据库中的存储方式"><a href="#数据在数据库中的存储方式" class="header-anchor">#</a> 数据在数据库中的存储方式</h2> <p><img alt="02" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/02.png" loading="lazy" class="lazy"></p> <h2 id="sql语句分类"><a href="#sql语句分类" class="header-anchor">#</a> SQL语句分类</h2> <ul><li><font color="#DC4040" size="4" face="黑体">DDL:数据定义语句[create表，库...]</font></li> <li><font color="#DC4040" size="4" face="黑体">DML:数据操作语句[增加insert,修改update，删除delete]</font></li> <li><font color="#DC4040" size="4" face="黑体">DQL:数据查询语句[select ]</font></li> <li><font color="#DC4040" size="4" face="黑体">DCL:数据控制语句[管理数据库:比如用户权限grant revoke ]</font></li></ul> <h2 id="创建数据库"><a href="#创建数据库" class="header-anchor">#</a> 创建数据库</h2> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/03.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">#演示数据库的操作</span>
<span class="token comment"># 创建一个名称为frx_db01的数据库。[图形化和指令 演示]</span>
<span class="token comment">#使用指定创建数据库</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> frx_db01<span class="token punctuation">;</span>
<span class="token comment">#删除数据库</span>
<span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> frx_db01<span class="token punctuation">;</span>
<span class="token comment"># 创建一个使用utf8字符集的frx_db02数据库</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> frx_db02  <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8
<span class="token comment"># 创建一个使用utf8字符集，并带校队规则的frx_db03数据库</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> frx_db03 <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_bin
<span class="token comment">#校对规则 utf8_bin 区分大小写 默认utf8_general_ci 不区分大小写</span>
<span class="token comment">#如果数据库下面的表没有指定字符集和校对规则，以它的数据库校对规则为准</span>
<span class="token comment">#下面是一条SQL语句，select 查询 * 表示所有字段</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t1 
<span class="token keyword">WHERE</span> NAME<span class="token operator">=</span><span class="token string">'tom'</span>
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="查看、删除数据库"><a href="#查看、删除数据库" class="header-anchor">#</a> 查看、删除数据库</h2> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/04.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 演示删除和查询数据库</span>
<span class="token comment"># 查看当前数据库服务器中的所有数据库</span>
<span class="token keyword">SHOW</span> <span class="token keyword">DATABASES</span>
<span class="token comment">#查看前面创建的frx_db01数据库的定义信息</span>
<span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> frx_db01
<span class="token comment">#说明 在创建数据库，表的时候，为了规避关键字，可以使用反引号解决</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token identifier"><span class="token punctuation">`</span>CREATE<span class="token punctuation">`</span></span>
<span class="token comment">#删除前面创建的frx_db01数据库</span>
<span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> frx_db01
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="备份恢复数据库"><a href="#备份恢复数据库" class="header-anchor">#</a> 备份恢复数据库</h2> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/05.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">#练习：database03.sq1 备份hsp_db02 和 hsp_db03 库中的数据，并恢复</span>
<span class="token comment">#备份，要在Dos下执行mysqldump指令其实在mysql安装目录\bin</span>
<span class="token comment">#这个备份文件，就是对应的sql语句</span>
mysqldump <span class="token operator">-</span>u root <span class="token operator">-</span>p <span class="token operator">-</span>B frx_db02 frx_db03 <span class="token operator">&gt;</span>d:\\bak<span class="token punctuation">.</span><span class="token keyword">sql</span>
<span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> frx_db03<span class="token punctuation">;</span>
<span class="token comment">#恢复数据库(注意：使用 mysql -u root -p  进入Mysql命令行执行)</span>
source d:\\bak<span class="token punctuation">.</span><span class="token keyword">sql</span>
<span class="token comment">#第二个恢复方法，直接将bak.sql的内容放到查询编辑器中，执行</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="创建表"><a href="#创建表" class="header-anchor">#</a> 创建表</h2> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/06.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">#指令创建表</span>
<span class="token comment">#注意：hsp_db02创建表时，要根据需保存的数据创建相应的列，并根据数据的类型定义相应的列类</span>
<span class="token comment">#id           整形</span>
<span class="token comment">#name         字符串</span>
<span class="token comment">#password     字符串</span>
<span class="token comment">#birthday     日期</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>USER<span class="token punctuation">`</span></span><span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>password<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>birthday<span class="token punctuation">`</span></span> <span class="token keyword">DATE</span><span class="token punctuation">)</span>
	<span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_bin <span class="token keyword">ENGINE</span> <span class="token keyword">INNODB</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="mysql-常用数据类型-列类型"><a href="#mysql-常用数据类型-列类型" class="header-anchor">#</a> Mysql 常用数据类型(列类型)</h2> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/07.png" loading="lazy" class="lazy"></p> <h3 id="数值型-整数-的基本使用"><a href="#数值型-整数-的基本使用" class="header-anchor">#</a> 数值型(整数)的基本使用</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/08.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 演示整形的使用 </span>
<span class="token comment"># 使用 tinyint 来演示范围</span>
<span class="token comment"># 表的字符集，校验规则，存储引擎，老师使用默认</span>
<span class="token comment">#1.如果没有指定 unsigned，则TINYINT就是有符号</span>
<span class="token comment">#2.如果指定 unsigned，则TINYINT就是无符号</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t3 <span class="token punctuation">(</span>
	id <span class="token keyword">TINYINT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t4 <span class="token punctuation">(</span>
	id <span class="token keyword">TINYINT</span> <span class="token keyword">UNSIGNED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t3 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">#添加语句</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t3
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t4 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="整型如何定义一个无符号的整数"><a href="#整型如何定义一个无符号的整数" class="header-anchor">#</a> 整型如何定义一个无符号的整数</h3> <ul><li><font color="#DC4040" size="4" face="黑体">create table t10(id tinyint);//默认是有符号的</font></li> <li><font color="#DC4040" size="4" face="黑体">create table t11(id tinyint unisigned);//无符号的</font></li></ul> <h3 id="数值型-bit-的使用"><a href="#数值型-bit-的使用" class="header-anchor">#</a> 数值型(bit)的使用</h3> <p>1.基本使用</p> <ul><li><strong>mysql&gt;create table t05(num bit(8));</strong></li> <li><strong>mysql&gt; insert into t05 (1,3);</strong></li> <li><strong>mysql&gt; insert into t05 values(2,65);</strong>
2. 细节说明bit.sql
<ul><li><strong>bit字段显示时,按照位的方式显示</strong>.</li> <li><strong>查询的时候仍然可以用使用添加的数值</strong></li> <li><strong>如果一个值只有0.1可以考虑使用bit(1),可以节约空间</strong></li> <li><strong>位类型。M指定位数，默认值1，范围1-64</strong></li> <li>使用不多.</li></ul></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 演示bit类型使用</span>
<span class="token comment"># 说明</span>
<span class="token comment">#1.bit(m) m在1-64</span>
<span class="token comment">#2.添加数据 范围 按照你给的位数来确定，比如m=8 表示一个字节 0~255</span>
<span class="token comment">#3.显示按照bit</span>
<span class="token comment">#4.查询时，仍然可以按照数来查询</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t05 <span class="token punctuation">(</span>num  <span class="token keyword">BIT</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t05 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t05<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t05 <span class="token keyword">WHERE</span> num <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="数值型-小数-的基本使用"><a href="#数值型-小数-的基本使用" class="header-anchor">#</a> 数值型(小数)的基本使用</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/09.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 演示decimal类型、float、double使用</span>
<span class="token comment"># 创建表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t06<span class="token punctuation">(</span>
	num1 <span class="token keyword">FLOAT</span><span class="token punctuation">,</span>
	num2 <span class="token keyword">DOUBLE</span><span class="token punctuation">,</span>
	num3 <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 添加数据</span>
 <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t06 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">88.12345678912345</span><span class="token punctuation">,</span><span class="token number">88.12345678912345</span><span class="token punctuation">,</span><span class="token number">88.12345678912345</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t06<span class="token punctuation">;</span>
<span class="token comment"># decimal 可以存放很大的数</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t07<span class="token punctuation">(</span>
	num <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">65</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t07 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">999999999999999999999888888888888888888887777777777777776666666</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t07<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t08<span class="token punctuation">(</span>
	num <span class="token keyword">BIGINT</span> <span class="token keyword">UNSIGNED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t08 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">999999999999999999999888888888888888888887777777777777776666666</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t08<span class="token punctuation">;</span>
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="字符串的基本使用"><a href="#字符串的基本使用" class="header-anchor">#</a> 字符串的基本使用</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/11.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 演示字符串类型的使用 char varchar</span>
<span class="token comment"># 注释快捷键 shift+ctrl+c 取消注释 shift+ctrl+r</span>
<span class="token comment">#  CHAR（size)</span>
<span class="token comment">#  固定长度字符串 最大255 字符</span>
<span class="token comment">#  VARCHAR(size) 0-65535</span>
<span class="token comment">#  可变长度字符串 最大65532字节[utf-8编码最大21844字符 1-3个字节用于记录大小]</span>
<span class="token comment">#  如果表的编码是 utf8 varchar(size) size=(65535-3)/3=21844</span>
<span class="token comment">#  如果的编码是   gbk  varchar(size) size=(65535-3)/2=32766</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t09<span class="token punctuation">(</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t10<span class="token punctuation">(</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32766</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">CHARSET</span> gbk<span class="token punctuation">;</span>
	
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> t10<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="字符串使用细节"><a href="#字符串使用细节" class="header-anchor">#</a> 字符串使用细节</h3> <p><img alt="12" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/12.png" loading="lazy" class="lazy"></p> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/13.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 演示字符串的使用细节</span>
<span class="token comment"># char(4)和varchar(4)这个表4示的是字符，而不是字节，不区分是汉字还是字母</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t11<span class="token punctuation">(</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t11 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'你好你好'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t11<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t12<span class="token punctuation">(</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t12 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'ab北京'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t12<span class="token punctuation">;</span>
<span class="token comment"># 如果varchar 不够用，可以考虑使用mediumtext 或者 longtext,</span>
<span class="token comment"># 如果想简单点，可以直接使用text</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t13 <span class="token punctuation">(</span>content <span class="token keyword">TEXT</span><span class="token punctuation">,</span>content2 <span class="token keyword">MEDIUMTEXT</span><span class="token punctuation">,</span> content3 <span class="token keyword">LONGTEXT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t13 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'韩顺平教育'</span><span class="token punctuation">,</span><span class="token string">'韩顺平教育100'</span><span class="token punctuation">,</span><span class="token string">'韩顺平教育1000~'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t13<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="日期类型的基本使用"><a href="#日期类型的基本使用" class="header-anchor">#</a> 日期类型的基本使用</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/14.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 演示时间相关的类型</span>
<span class="token comment"># 创建一张表，date,datatime,timestamp</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t14<span class="token punctuation">(</span>
	birthday <span class="token keyword">DATE</span><span class="token punctuation">,</span> <span class="token comment">-- 生日</span>
	job_time <span class="token keyword">DATETIME</span><span class="token punctuation">,</span> <span class="token comment">-- 记录年月日 时分秒</span>
	login_time <span class="token keyword">TIMESTAMP</span>
	<span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span>
	<span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- 登陆时间，如果希望login_time自动更新，需要配置</span>
	
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t14<span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t14<span class="token punctuation">(</span>birthday<span class="token punctuation">,</span>job_time<span class="token punctuation">)</span>
	<span class="token keyword">VALUE</span><span class="token punctuation">(</span><span class="token string">'2022-11-11'</span><span class="token punctuation">,</span><span class="token string">'2022-11-11 10:10:10'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">-- 如果我们更新 t14表的某条记录，login_time列会自动的以当前时间进行更新</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="创建表练习"><a href="#创建表练习" class="header-anchor">#</a> 创建表练习</h2> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/15.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 创建表的课堂练习</span>
<span class="token comment">-- 字段 属性</span>
<span class="token comment">-- Id   整形</span>
<span class="token comment">-- name 字符型</span>
<span class="token comment">-- sex  字符型</span>
<span class="token comment">-- birthday   日期型(date)</span>
<span class="token comment">-- entry_date 日期型(date)</span>
<span class="token comment">-- job  字符型</span>
<span class="token comment">-- Salary     小数型</span>
<span class="token comment">-- resume     文本型</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>emp<span class="token punctuation">`</span></span><span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	NAME <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	sex <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	birthday <span class="token keyword">DATE</span><span class="token punctuation">,</span>
	entry_date <span class="token keyword">DATETIME</span><span class="token punctuation">,</span>
	job <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	salary <span class="token keyword">DOUBLE</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>resume<span class="token punctuation">`</span></span> <span class="token keyword">TEXT</span><span class="token punctuation">)</span> <span class="token keyword">CHARSET</span> utf8 <span class="token keyword">COLLATE</span> utf_8 <span class="token keyword">ENGINE</span> <span class="token keyword">INNODB</span><span class="token punctuation">;</span>
	
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="修改表-基本介绍"><a href="#修改表-基本介绍" class="header-anchor">#</a> 修改表-基本介绍</h2> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/16.png" loading="lazy" class="lazy"></p> <h2 id="修改表-课堂练习"><a href="#修改表-课堂练习" class="header-anchor">#</a> 修改表-课堂练习</h2> <ul><li>应用实例
<ul><li>员工表emp的上增加一个image列，varchar类型(要求在resume后面).</li> <li>修改job列，使其长度为60。</li> <li>删除sex列</li> <li>表名改为employee.</li> <li>修改表的字符集为utf8</li> <li>列名name修改为user_name</li></ul></li></ul> <p>alter table user change column name username varchar(20);</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 修改表的操作</span>
<span class="token comment">-- 员工表emp的上增加一个image列，varchar类型(要求在resume后面)</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> emp 
	<span class="token keyword">ADD</span> image <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span>
	<span class="token keyword">AFTER</span> RESUME
	
<span class="token keyword">DESC</span> employee <span class="token comment">-- 显示表结构，可以查看表的所有列</span>
<span class="token comment">-- 修改job列，使其长度`emp`为60</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> emp
	<span class="token keyword">MODIFY</span> job <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span>
	
<span class="token comment">-- 删除sex列。</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> emp
	<span class="token keyword">DESC</span> sex
	
<span class="token comment">-- 表名改为employee</span>
<span class="token keyword">RENAME</span> <span class="token keyword">TABLE</span> emp <span class="token keyword">TO</span> employee
<span class="token comment">-- 修改表的字符集为utf8</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> employee <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8
<span class="token comment">-- 列名name修改位user_name</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> employee 
	CHANGE <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> user_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="数据库-crud语句"><a href="#数据库-crud语句" class="header-anchor">#</a> 数据库 CRUD语句</h2> <ol><li><strong>Insert语句        (添加数据)</strong></li> <li><strong>Update语句     (更新数据)</strong></li> <li><strong>Delete语句       (删除语句)</strong></li> <li><strong>Select语句        (查找语句)</strong></li></ol> <h2 id="insert-语句"><a href="#insert-语句" class="header-anchor">#</a> Insert 语句</h2> <h3 id="使用-insert-语句向表中插入数据"><a href="#使用-insert-语句向表中插入数据" class="header-anchor">#</a> 使用 INSERT 语句向表中插入数据</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/18.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 练习insert语句</span>
<span class="token comment">-- 创建一张商品表 goods(id int,goods_name varchar(10),price double);</span>
<span class="token comment">-- 添加2条记录</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> goods<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	goods_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	price <span class="token keyword">DOUBLE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 添加数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> goods<span class="token punctuation">(</span> id<span class="token punctuation">,</span>goods_name<span class="token punctuation">,</span>price<span class="token punctuation">)</span>
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'华为手机'</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> goods<span class="token punctuation">(</span>id<span class="token punctuation">,</span>goods_name<span class="token punctuation">,</span>price<span class="token punctuation">)</span>
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">'苹果手机'</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> goods
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="细节说明"><a href="#细节说明" class="header-anchor">#</a> 细节说明</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 说明insert 语句的细节</span>
<span class="token comment">-- 1.插入的数据应与字段的数据类型相同</span>
<span class="token comment">-- 比如把'abc'添加到int 类型会错误</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>goods<span class="token punctuation">`</span></span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>goods_name<span class="token punctuation">,</span>price<span class="token punctuation">)</span>
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'30'</span><span class="token punctuation">,</span><span class="token string">'小米手机'</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment">-- 2.数据的长度应在列的规定范围内，例如：不能将一个长度为80的字符串加入到长度为40的列中。</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>goods<span class="token punctuation">`</span></span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>goods_name<span class="token punctuation">,</span>price<span class="token punctuation">)</span>
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token string">'vivo手机vivo手机'</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment">-- 3.在values中列出的数据位置必须与被加入的列的位置相对应。</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>goods<span class="token punctuation">`</span></span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>goods_name<span class="token punctuation">,</span>price<span class="token punctuation">)</span>
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'vivo手机'</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment">-- 4.字符和日期型数据应包含在单引号中。</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>goods<span class="token punctuation">`</span></span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>goods_name<span class="token punctuation">,</span>price<span class="token punctuation">)</span>
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token string">'vivo手机'</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment">-- 5.列可以插入空值[前提是该字段允许为空],insert into table value(null)</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>goods<span class="token punctuation">`</span></span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>goods_name<span class="token punctuation">,</span>price<span class="token punctuation">)</span>
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token string">'vivo手机'</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment">-- 6.insert into tab_name(列名...) values (),(),() 形式添加多条记录</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>goods<span class="token punctuation">`</span></span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>goods_name<span class="token punctuation">,</span>price<span class="token punctuation">)</span>
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token string">'三星手机'</span><span class="token punctuation">,</span><span class="token number">2300</span><span class="token punctuation">)</span>，<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token string">'海尔手机'</span><span class="token punctuation">,</span><span class="token number">1800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 7.如果是给表中的所有字段添加数据，可以不写前面的字段名称</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>goods<span class="token punctuation">`</span></span><span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token string">'华为手机'</span><span class="token punctuation">,</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 8.默认值的使用，当不给某个字段值时，如果有默认值就会添加，否则报错</span>
<span class="token comment">--   如果某个字段没有指定 not null,那么当添加数据时，没有给定值，则会给默认值</span>
<span class="token comment">--   如果我们希望指定某个列默认值，</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>goods<span class="token punctuation">`</span></span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>goods_name<span class="token punctuation">)</span>
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token string">'格力手机'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> goods<span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>goods2<span class="token punctuation">`</span></span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>goods_name<span class="token punctuation">)</span>
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token string">'格力手机'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> goods2<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h2 id="update-语句"><a href="#update-语句" class="header-anchor">#</a> update 语句</h2> <h3 id="使用-update-语句修改表中数据"><a href="#使用-update-语句修改表中数据" class="header-anchor">#</a> 使用 update 语句修改表中数据</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/19.png" loading="lazy" class="lazy"></p> <h3 id="基本使用"><a href="#基本使用" class="header-anchor">#</a> 基本使用</h3> <p>要求:在上面创建的employee表中修改表中的纪录</p> <ol><li>将所有员工薪水修改为5000元。</li> <li>将姓名为小妖怪的员工薪水修改为3000元。</li> <li>将老妖怪的薪水在原有基础上增加1000元。</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 演示update语句</span>
<span class="token comment">-- 要求：在上面创建的employee表中修改表中的记录</span>
<span class="token comment">-- 1.将所有员工薪水修改为5000元[如果没有带where条件，会修改所有的记录，因此要小心]</span>
<span class="token keyword">UPDATE</span> employee <span class="token keyword">SET</span> salary <span class="token operator">=</span><span class="token number">5000</span>
<span class="token comment">-- 2.将姓名为 小妖怪 的员工薪水修改为3000元</span>
<span class="token keyword">UPDATE</span> employee 
	<span class="token keyword">SET</span> salary <span class="token operator">=</span> <span class="token number">3000</span> 
	<span class="token keyword">WHERE</span> user_name<span class="token operator">=</span><span class="token string">'小妖怪'</span><span class="token punctuation">;</span>
	
<span class="token comment">-- 3.将老妖怪 的薪水在原有基础上增加1000元</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employee 
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token string">'老妖怪'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'2001-02-11'</span><span class="token punctuation">,</span><span class="token string">'2021-01-05 10:10:10'</span><span class="token punctuation">,</span><span class="token string">'寻路的'</span><span class="token punctuation">,</span><span class="token number">5000</span><span class="token punctuation">,</span><span class="token string">'哈哈'</span><span class="token punctuation">,</span><span class="token string">'e:\\b.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> employee
	<span class="token keyword">SET</span> salary<span class="token operator">=</span>salary<span class="token operator">+</span><span class="token number">1000</span>
	<span class="token keyword">WHERE</span> user_name<span class="token operator">=</span><span class="token string">'老妖怪'</span><span class="token punctuation">;</span>
	
<span class="token comment">-- 可以修改多个列</span>
<span class="token keyword">UPDATE</span> employee
	<span class="token keyword">SET</span> salary<span class="token operator">=</span>salary<span class="token operator">+</span><span class="token number">1000</span><span class="token punctuation">,</span>job<span class="token operator">=</span><span class="token string">'出主意'</span>
	<span class="token keyword">WHERE</span> user_name<span class="token operator">=</span><span class="token string">'老妖怪'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employee<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="使用细节"><a href="#使用细节" class="header-anchor">#</a> 使用细节</h3> <ol><li><font color="#DC4040" size="4" face="黑体">UPDATE语法可以用新值更新原有表行中的各列。</font></li> <li><font color="#DC4040" size="4" face="黑体">SET子句指示要修改哪些列和要给予哪些值。</font></li> <li><font color="#DC4040" size="4" face="黑体">WHERE子句指定应更新哪些行。如没有WHERE子句,则更新所有的行(记录)，因此老师提醒一定小心。</font></li> <li><font color="#DC4040" size="4" face="黑体">如果需要修改多个字段,可以通过set字段1=值1,字段2=值2.….</font></li></ol> <h2 id="delete-语句"><a href="#delete-语句" class="header-anchor">#</a> delete 语句</h2> <h3 id="使用-delete-语句删除表中数据"><a href="#使用-delete-语句删除表中数据" class="header-anchor">#</a> 使用 delete 语句删除表中数据</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/21.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code> <span class="token comment">-- delete 语句演示</span>
 <span class="token comment">-- 删除表中名称为'老妖怪'的记录</span>
 <span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> employee
	<span class="token keyword">WHERE</span> user_name<span class="token operator">=</span><span class="token string">'老妖怪'</span>
	
 <span class="token comment">-- 删除表中所有记录</span>
 <span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> employee<span class="token punctuation">;</span>
 <span class="token comment">-- delete语句不能删除某一列的值(可使用update 设为null或者'')</span>
 <span class="token keyword">UPDATE</span> employee <span class="token keyword">SET</span> job <span class="token operator">=</span><span class="token string">''</span> <span class="token keyword">WHERE</span> user_name<span class="token operator">=</span><span class="token string">'老妖怪'</span><span class="token punctuation">;</span>
 <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employee
 <span class="token comment">-- 要删除表 </span>
 <span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> employee<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="使用细节-2"><a href="#使用细节-2" class="header-anchor">#</a> 使用细节</h3> <ol><li><font color="#DC4040" size="4" face="黑体">如果不使用where子句，将删除表中所有数据。</font></li> <li><font color="#DC4040" size="4" face="黑体">Delete语句不能删除某一列的值(可使用update设为null或者&quot;)</font></li> <li><font color="#DC4040" size="4" face="黑体">使用delete语句仅删除记录，不删除表本身。如要删除表，使用drop table语句。drop table表名;</font></li></ol> <h2 id="select-语句"><a href="#select-语句" class="header-anchor">#</a> select 语句</h2> <h3 id="基本语法"><a href="#基本语法" class="header-anchor">#</a> 基本语法</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/22.png" loading="lazy" class="lazy"></p> <h3 id="注意事项"><a href="#注意事项" class="header-anchor">#</a> 注意事项</h3> <ol><li><font color="#DC4040" size="4" face="黑体">Select 指定查询哪些列的数据。</font></li> <li><font color="#DC4040" size="4" face="黑体">column指定列名。</font></li> <li><font color="#DC4040" size="4" face="黑体">*号代表查询所有列。</font></li> <li><font color="#DC4040" size="4" face="黑体">From指定查询哪张表。</font></li> <li><font color="#DC4040" size="4" face="黑体">DISTINCT可选，指显示结果时，是否去掉重复数据</font></li></ol> <h3 id="课堂练习"><a href="#课堂练习" class="header-anchor">#</a> 课堂练习</h3> <blockquote><p>查询表中所有学生的信息。</p> <p>查询表中所有学生的姓名和对应的英语成绩。</p> <p>过滤表中重复数据distinct。</p> <p>要查询的记录,每个字段都相同，才会去重</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- select 语句</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> student<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">1</span><span class="token punctuation">,</span>
	NAME <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span><span class="token punctuation">,</span>
	chinese <span class="token keyword">FLOAT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
	english <span class="token keyword">FLOAT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
	math <span class="token keyword">FLOAT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student<span class="token punctuation">(</span>id<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>chinese<span class="token punctuation">,</span>english<span class="token punctuation">,</span>math<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'jack'</span><span class="token punctuation">,</span><span class="token number">89</span><span class="token punctuation">,</span><span class="token number">78</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student<span class="token punctuation">(</span>id<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>chinese<span class="token punctuation">,</span>english<span class="token punctuation">,</span>math<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'张飞'</span><span class="token punctuation">,</span><span class="token number">67</span><span class="token punctuation">,</span><span class="token number">98</span><span class="token punctuation">,</span><span class="token number">56</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student<span class="token punctuation">(</span>id<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>chinese<span class="token punctuation">,</span>english<span class="token punctuation">,</span>math<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'宋江'</span><span class="token punctuation">,</span><span class="token number">87</span><span class="token punctuation">,</span><span class="token number">78</span><span class="token punctuation">,</span><span class="token number">77</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student<span class="token punctuation">(</span>id<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>chinese<span class="token punctuation">,</span>english<span class="token punctuation">,</span>math<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'关羽'</span><span class="token punctuation">,</span><span class="token number">85</span><span class="token punctuation">,</span><span class="token number">78</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student<span class="token punctuation">(</span>id<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>chinese<span class="token punctuation">,</span>english<span class="token punctuation">,</span>math<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'赵云'</span><span class="token punctuation">,</span><span class="token number">89</span><span class="token punctuation">,</span><span class="token number">78</span><span class="token punctuation">,</span><span class="token number">94</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student<span class="token punctuation">(</span>id<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>chinese<span class="token punctuation">,</span>english<span class="token punctuation">,</span>math<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">'欧阳锋'</span><span class="token punctuation">,</span><span class="token number">69</span><span class="token punctuation">,</span><span class="token number">76</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student<span class="token punctuation">(</span>id<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>chinese<span class="token punctuation">,</span>english<span class="token punctuation">,</span>math<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string">'黄蓉'</span><span class="token punctuation">,</span><span class="token number">59</span><span class="token punctuation">,</span><span class="token number">73</span><span class="token punctuation">,</span><span class="token number">96</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student
<span class="token comment">-- 查询表中所有学生的信息</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
<span class="token comment">-- 查询表中所有学生的姓名和对应的英语成绩</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span>english <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
<span class="token comment">-- 过滤表中重复数据 distinct</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> english <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
<span class="token comment">-- 要查询的记录，每个字段都相同，才会去重</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span>english <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="使用表达式对查询的列进行运算"><a href="#使用表达式对查询的列进行运算" class="header-anchor">#</a> 使用表达式对查询的列进行运算</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/23.png" loading="lazy" class="lazy"></p> <h3 id="在-select-语句中可使用-as-语句"><a href="#在-select-语句中可使用-as-语句" class="header-anchor">#</a> 在 select 语句中可使用 as 语句</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/24.png" loading="lazy" class="lazy"></p> <h3 id="练习"><a href="#练习" class="header-anchor">#</a> 练习</h3> <blockquote><p>统计每个学生的总分
在所有学生总分加10分的情况</p> <p>使用别名表示学生分数。</p> <p>在赵云的总分上增加60%</p> <p>统计关羽的总分。
使用别名表示学生的数学分数。</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- select 语句使用</span>
<span class="token comment">-- 统计每个学生的总分</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token punctuation">(</span>chinese<span class="token operator">+</span>english<span class="token operator">+</span>math<span class="token punctuation">)</span> <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
<span class="token comment">-- 在所有学生总分加10分的情况</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token punctuation">(</span>chinese<span class="token operator">+</span>english<span class="token operator">+</span>math<span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> total_score <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
<span class="token comment">-- 使用别名表示学生分数</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">AS</span> <span class="token string">'名字'</span><span class="token punctuation">,</span><span class="token punctuation">(</span>chinese<span class="token operator">+</span>english<span class="token operator">+</span>math<span class="token punctuation">)</span> <span class="token keyword">AS</span> total_score <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token punctuation">(</span>chinese<span class="token operator">+</span>english<span class="token operator">+</span>math<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">1.6</span> <span class="token keyword">AS</span> total_score <span class="token keyword">FROM</span> student
 <span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token operator">=</span><span class="token string">'赵云'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token punctuation">(</span>chinese<span class="token operator">+</span>english<span class="token operator">+</span>math<span class="token punctuation">)</span> <span class="token keyword">AS</span> total_score <span class="token keyword">FROM</span> student
 <span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token operator">=</span><span class="token string">'关羽'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>math<span class="token punctuation">`</span></span> <span class="token keyword">AS</span><span class="token identifier"><span class="token punctuation">`</span>Math<span class="token punctuation">`</span></span> <span class="token keyword">FROM</span> student
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="在-where-子句中经常使用的运算符"><a href="#在-where-子句中经常使用的运算符" class="header-anchor">#</a> 在 where 子句中经常使用的运算符</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/25.png" loading="lazy" class="lazy"></p> <h3 id="使用-where-子句-进行过滤查询"><a href="#使用-where-子句-进行过滤查询" class="header-anchor">#</a> 使用 where 子句，进行过滤查询</h3> <blockquote><p>查询姓名为赵云的学生成绩</p> <p>查询英语成绩大于90分的同学</p> <p>查询总分大于200分的所有同学</p></blockquote> <ul><li><p>使用where子句，课堂练习[5min]:</p> <blockquote><p>查询math大于60并且(and) id大于90的学生成绩</p> <p>查询英语成绩大于语文成绩的同学
查询总分大于200分并且数学成绩小于语文成绩,的姓韩的学生.</p></blockquote></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- select语句</span>
<span class="token comment">-- 查询姓名为赵云的学生成绩</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student
	<span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token operator">=</span><span class="token string">'赵云'</span>
<span class="token comment">-- 查询英语成绩大于90分的同学</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student
	<span class="token keyword">WHERE</span> english<span class="token operator">&gt;</span><span class="token number">90</span>
	
<span class="token comment">-- 查询总分大于200分的所有同学</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student
	<span class="token keyword">WHERE</span> <span class="token punctuation">(</span>chinese<span class="token operator">+</span>english<span class="token operator">+</span>math<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">200</span>
	
<span class="token comment">-- 查询math大于60 并且(and) id大于4的学生成绩</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student
	<span class="token keyword">WHERE</span> math<span class="token operator">&gt;</span><span class="token number">60</span> <span class="token operator">AND</span> id<span class="token operator">&gt;</span><span class="token number">4</span>
	
<span class="token comment">-- 查询英语成绩大于语文成绩的同学</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student
	<span class="token keyword">WHERE</span> english<span class="token operator">&gt;</span>chinese
	
<span class="token comment">-- 查询总分大于200 分并且数学成绩小于语文成绩 的姓韩的学生</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student
	<span class="token keyword">WHERE</span> <span class="token punctuation">(</span>chinese<span class="token operator">+</span>math<span class="token operator">+</span>english<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">200</span> <span class="token operator">AND</span> 
	math<span class="token operator">&lt;</span>chinese <span class="token operator">AND</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">LIKE</span><span class="token string">'张%'</span><span class="token punctuation">;</span>
	
<span class="token comment">-- 查询英语分数为80-90之间的同学</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student
	<span class="token keyword">WHERE</span> english<span class="token operator">&gt;=</span><span class="token number">80</span> <span class="token operator">AND</span> english<span class="token operator">&lt;=</span><span class="token number">90</span>
	
<span class="token comment">-- 查询数学分数为89，90，91的同学</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student
	<span class="token keyword">WHERE</span> math <span class="token operator">IN</span><span class="token punctuation">(</span><span class="token number">89</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">91</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment">-- 查询所有姓李的学生</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student
	<span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">LIKE</span> <span class="token string">'李%'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h3 id="使用-order-by-子句排序查询结果"><a href="#使用-order-by-子句排序查询结果" class="header-anchor">#</a> 使用 order by 子句排序查询结果</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/26.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 演示order by使用</span>
<span class="token comment">-- 对数学成绩排序后输出【升序】</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> math<span class="token punctuation">;</span>
	
<span class="token comment">-- 对总分按从高到低的顺序输出</span>
<span class="token keyword">SELECT</span>  <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token punctuation">(</span>chinese<span class="token operator">+</span>math<span class="token operator">+</span>english<span class="token punctuation">)</span> <span class="token keyword">AS</span> total_score <span class="token keyword">FROM</span> student
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> total_score <span class="token keyword">DESC</span><span class="token punctuation">;</span>
	
<span class="token comment">-- 对姓李的学生成绩排序输出(升序)</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token punctuation">(</span>chinese<span class="token operator">+</span>math<span class="token operator">+</span>english<span class="token punctuation">)</span> <span class="token keyword">AS</span> total_score <span class="token keyword">FROM</span> student
	<span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">LIKE</span> <span class="token string">'韩%'</span>
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> total_score<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="合计-统计函数"><a href="#合计-统计函数" class="header-anchor">#</a> 合计/统计函数</h2> <h3 id="count"><a href="#count" class="header-anchor">#</a> count</h3> <p><font color="#DC4040" size="4" face="黑体">Select count(*) | count(列名) from table_name [WHERE where_definition]</font></p> <blockquote><p>统计一个班级共有多少学生?
统计数学成绩大于90的学生有多少个?</p> <p>统计总分大于250的人数有多少?
count(*)和count(列)的区别</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 演示mysql的统计函数的使用</span>
<span class="token comment">-- 统计一个班级有多少学生</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
<span class="token comment">-- 统计数学成绩大于90的学生有多少个</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> student
	<span class="token keyword">WHERE</span> math<span class="token operator">&gt;</span><span class="token number">90</span>
	
<span class="token comment">-- 统计总分大于250的人数有多少</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> student
	<span class="token keyword">WHERE</span> <span class="token punctuation">(</span>chinese<span class="token operator">+</span>math<span class="token operator">+</span>english<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">250</span><span class="token punctuation">;</span>
	
<span class="token comment">-- count(*)和count(列)的区别</span>
<span class="token comment">-- 解释：conut(*)返回满足条件记录的总行数</span>
<span class="token comment">-- count(列)：统计满足条件的某列有多少个，但是会排除为 null</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t15<span class="token punctuation">(</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t15 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'tom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t15 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'jack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t15 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'mary'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t15 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t15<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> t15<span class="token punctuation">;</span><span class="token comment">-- 4</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> t15<span class="token punctuation">;</span> <span class="token comment">-- 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="sum"><a href="#sum" class="header-anchor">#</a> sum</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/27.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 演示sum函数的使用</span>
<span class="token comment">-- 统计一个班级数学总成绩</span>
<span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span> <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
<span class="token comment">-- 统计一个班级语文、英语、数学各科的总成绩</span>
<span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>chinese<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">SUM</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">SUM</span><span class="token punctuation">(</span>english<span class="token punctuation">)</span> <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
<span class="token comment">-- 统计一个班级语文、英语、数学各科的总成绩</span>
<span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>chinese<span class="token operator">+</span>math<span class="token operator">+</span>english<span class="token punctuation">)</span> <span class="token keyword">AS</span> total_score <span class="token keyword">FROM</span> student
<span class="token comment">-- 统计一个班级语文成绩平均分</span>
<span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>chinese<span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="avg"><a href="#avg" class="header-anchor">#</a> avg</h3> <p>AVG函数返回满足where条件的一列的平均值</p> <p>Select avg(列名) {avg(列名)...} from tablename [WHERE  where_definition]</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 演示avg的使用</span>
<span class="token comment">-- 求一个班级数学平均分</span>
<span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span> <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
<span class="token comment">-- 求一个班级总分平均分</span>
<span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>chinese<span class="token operator">+</span>math<span class="token operator">+</span>english<span class="token punctuation">)</span> <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="max-min"><a href="#max-min" class="header-anchor">#</a> max/min</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/29.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 演示max和min的使用</span>
<span class="token comment">-- 求班级最高分和最低分(数值范围在统计中特别有用)</span>
<span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>math<span class="token operator">+</span>chinese<span class="token operator">+</span>english<span class="token punctuation">)</span> <span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
	
<span class="token comment">-- 求出班级数学最高分和最低分</span>
<span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">MIN</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span> 
	<span class="token keyword">FROM</span> student<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="使用-group-by-子句对列进行分组"><a href="#使用-group-by-子句对列进行分组" class="header-anchor">#</a> 使用 group by 子句对列进行分组</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/30.png" loading="lazy" class="lazy"></p> <h3 id="使用-having-子句对分组后的结果进行过滤"><a href="#使用-having-子句对分组后的结果进行过滤" class="header-anchor">#</a> 使用 having 子句对分组后的结果进行过滤</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/31.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> dept<span class="token punctuation">(</span> <span class="token comment">/*部门表*/</span>
deptno <span class="token keyword">MEDIUMINT</span>   <span class="token keyword">UNSIGNED</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span>  <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span>
dname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span>  <span class="token keyword">DEFAULT</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
loc <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> dept <span class="token keyword">VALUES</span>
	<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'ACCOUNTING'</span><span class="token punctuation">,</span><span class="token string">'NEW YORK'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">'RESEARCH'</span><span class="token punctuation">,</span><span class="token string">'DALLAS'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token string">'SALES'</span><span class="token punctuation">,</span><span class="token string">'CHICAGO'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token string">'OPERATIONS'</span><span class="token punctuation">,</span><span class="token string">'BOSTON'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> dept<span class="token punctuation">;</span>
<span class="token comment">-- 员工表</span>
<span class="token comment"># 创建表EMP成员</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> emp
<span class="token punctuation">(</span>empno  <span class="token keyword">MEDIUMINT</span> <span class="token keyword">UNSIGNED</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span>  <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">/*编号*/</span>
ename <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">/*名字*/</span>
job <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token comment">/*工作*/</span>
mgr <span class="token keyword">MEDIUMINT</span> <span class="token keyword">UNSIGNED</span> <span class="token punctuation">,</span><span class="token comment">/*上级编号*/</span>
hiredate <span class="token keyword">DATE</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token comment">/*入职时间*/</span>
sal <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token comment">/*薪水*/</span>
comm <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">,</span><span class="token comment">/*奖金*/</span>
deptno <span class="token keyword">MEDIUMINT</span> <span class="token keyword">UNSIGNED</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span> <span class="token comment">/*部门编号*/</span>
<span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token comment">-- 添加测试数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> emp <span class="token keyword">VALUES</span>
	<span class="token punctuation">(</span><span class="token number">7369</span><span class="token punctuation">,</span> <span class="token string">'SMITH'</span><span class="token punctuation">,</span> <span class="token string">'CLERK'</span><span class="token punctuation">,</span> <span class="token number">7902</span><span class="token punctuation">,</span> <span class="token string">'1990-12-17'</span><span class="token punctuation">,</span> <span class="token number">800.00</span><span class="token punctuation">,</span><span class="token boolean">NULL</span> <span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token punctuation">(</span><span class="token number">7499</span><span class="token punctuation">,</span> <span class="token string">'ALLEN'</span><span class="token punctuation">,</span> <span class="token string">'SALESMAN'</span><span class="token punctuation">,</span> <span class="token number">7698</span><span class="token punctuation">,</span> <span class="token string">'1991-2-20'</span><span class="token punctuation">,</span> <span class="token number">1600.00</span><span class="token punctuation">,</span> <span class="token number">300.00</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token punctuation">(</span><span class="token number">7521</span><span class="token punctuation">,</span> <span class="token string">'WARD'</span><span class="token punctuation">,</span> <span class="token string">'SALESMAN'</span><span class="token punctuation">,</span> <span class="token number">7698</span><span class="token punctuation">,</span> <span class="token string">'1991-2-22'</span><span class="token punctuation">,</span> <span class="token number">1250.00</span><span class="token punctuation">,</span> <span class="token number">500.00</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token punctuation">(</span><span class="token number">7566</span><span class="token punctuation">,</span> <span class="token string">'JONES'</span><span class="token punctuation">,</span> <span class="token string">'MANAGER'</span><span class="token punctuation">,</span> <span class="token number">7839</span><span class="token punctuation">,</span> <span class="token string">'1991-4-2'</span><span class="token punctuation">,</span> <span class="token number">2975.00</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token punctuation">(</span><span class="token number">7654</span><span class="token punctuation">,</span> <span class="token string">'MARTIN'</span><span class="token punctuation">,</span> <span class="token string">'SALESMAN'</span><span class="token punctuation">,</span> <span class="token number">7698</span><span class="token punctuation">,</span> <span class="token string">'1991-9-28'</span><span class="token punctuation">,</span><span class="token number">1250.00</span><span class="token punctuation">,</span><span class="token number">1400.00</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">7698</span><span class="token punctuation">,</span> <span class="token string">'BLAKE'</span><span class="token punctuation">,</span><span class="token string">'MANAGER'</span><span class="token punctuation">,</span> <span class="token number">7839</span><span class="token punctuation">,</span><span class="token string">'1991-5-1'</span><span class="token punctuation">,</span> <span class="token number">2850.00</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token punctuation">(</span><span class="token number">7782</span><span class="token punctuation">,</span> <span class="token string">'CLARK'</span><span class="token punctuation">,</span><span class="token string">'MANAGER'</span><span class="token punctuation">,</span> <span class="token number">7839</span><span class="token punctuation">,</span> <span class="token string">'1991-6-9'</span><span class="token punctuation">,</span><span class="token number">2450.00</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token punctuation">(</span><span class="token number">7788</span><span class="token punctuation">,</span> <span class="token string">'SCOTT'</span><span class="token punctuation">,</span><span class="token string">'ANALYST'</span><span class="token punctuation">,</span><span class="token number">7566</span><span class="token punctuation">,</span> <span class="token string">'1997-4-19'</span><span class="token punctuation">,</span><span class="token number">3000.00</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token punctuation">(</span><span class="token number">7839</span><span class="token punctuation">,</span> <span class="token string">'KING'</span><span class="token punctuation">,</span><span class="token string">'PRESIDENT'</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token string">'1991-11-17'</span><span class="token punctuation">,</span><span class="token number">5000.00</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">7844</span><span class="token punctuation">,</span> <span class="token string">'TURNER'</span><span class="token punctuation">,</span> <span class="token string">'SALESMAN'</span><span class="token punctuation">,</span><span class="token number">7698</span><span class="token punctuation">,</span> <span class="token string">'1991-9-8'</span><span class="token punctuation">,</span> <span class="token number">1500.00</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token punctuation">(</span><span class="token number">7900</span><span class="token punctuation">,</span> <span class="token string">'JAMES'</span><span class="token punctuation">,</span><span class="token string">'CLERK'</span><span class="token punctuation">,</span><span class="token number">7698</span><span class="token punctuation">,</span> <span class="token string">'1991-12-3'</span><span class="token punctuation">,</span><span class="token number">950.00</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token punctuation">(</span><span class="token number">7902</span><span class="token punctuation">,</span> <span class="token string">'FORD'</span><span class="token punctuation">,</span> <span class="token string">'ANALYST'</span><span class="token punctuation">,</span><span class="token number">7566</span><span class="token punctuation">,</span><span class="token string">'1991-12-3'</span><span class="token punctuation">,</span><span class="token number">3000.00</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token punctuation">(</span><span class="token number">7934</span><span class="token punctuation">,</span><span class="token string">'MILLER'</span><span class="token punctuation">,</span><span class="token string">'CLERK'</span><span class="token punctuation">,</span><span class="token number">7782</span><span class="token punctuation">,</span><span class="token string">'1992-1-23'</span><span class="token punctuation">,</span> <span class="token number">1300.00</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- 工资级别表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> salgrade
<span class="token punctuation">(</span>
grade <span class="token keyword">MEDIUMINT</span> <span class="token keyword">UNSIGNED</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span>
losal <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
hisal <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#测试数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> salgrade <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">700</span><span class="token punctuation">,</span><span class="token number">1200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> salgrade <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1201</span><span class="token punctuation">,</span><span class="token number">1400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> salgrade <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1401</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> salgrade <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2001</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> salgrade <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3001</span><span class="token punctuation">,</span><span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> salgrade<span class="token punctuation">;</span>
<span class="token comment"># 演示group by+having</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> 用于对查询结果分组统计，
<span class="token comment">-- having子句用于限制分组显示结果</span>
<span class="token comment">-- 如何显示每个部门的平均工资和最高工资</span>
<span class="token comment"># 按照部门来分组查询</span>
<span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">MAX</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span>deptno
	<span class="token keyword">FROM</span> emp <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> deptno<span class="token punctuation">;</span>
	
<span class="token comment">-- 显示每个部门的每种岗位的平均工资和最低工资</span>
<span class="token comment">-- 1.显示每个部门的平均工资和最低工资</span>
<span class="token comment">-- 2.显示每个部门的每种岗位的平均工资和最低工资</span>
<span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">MIN</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span>deptno<span class="token punctuation">,</span>job
	<span class="token keyword">FROM</span> emp <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> deptno<span class="token punctuation">,</span>job<span class="token punctuation">;</span>
	
<span class="token comment">-- 显示平均工资低于2000的部门号和他的平均工资</span>
<span class="token comment">-- 1.显示各个部门的平均工资和部门号和它的平均工资</span>
<span class="token comment">-- 2.在1的结果基础上，进行过滤，保留 avg(sal)&lt;2000</span>
<span class="token comment">-- 3.使用别名进行过滤</span>
<span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span>deptno
	<span class="token keyword">FROM</span> emp <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> deptno
	<span class="token keyword">HAVING</span> <span class="token function">AVG</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">2000</span><span class="token punctuation">;</span>
	
<span class="token comment">-- 使用别名 </span>
<span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">AS</span> avg_sal<span class="token punctuation">,</span>deptno
	<span class="token keyword">FROM</span> emp <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> deptno
		<span class="token keyword">HAVING</span> avg_sal<span class="token operator">&lt;</span><span class="token number">2000</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br></div></div><h2 id="字符串相关函数"><a href="#字符串相关函数" class="header-anchor">#</a> 字符串相关函数</h2> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/32.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 演示字符串相关函数的使用</span>
<span class="token comment">-- CHARSET(str) 返回字串字符集</span>
<span class="token keyword">SELECT</span> <span class="token keyword">CHARSET</span><span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- CONCAT(string2 [,....]) 连接字串</span>
<span class="token keyword">SELECT</span> CONCAT<span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token string">' 工作是'</span><span class="token punctuation">,</span>job<span class="token punctuation">)</span> <span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- INSTR (string,substring )返回substring在string中出现的位置，没有返回0</span>
<span class="token comment">-- dual 亚元表，系统表 可以作为测试表使用</span>
<span class="token keyword">SELECT</span> INSTR<span class="token punctuation">(</span><span class="token string">'hanshunping'</span><span class="token punctuation">,</span><span class="token string">'ping'</span><span class="token punctuation">)</span><span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- UCASE(string2) 转换成大写</span>
<span class="token keyword">SELECT</span> <span class="token function">UCASE</span><span class="token punctuation">(</span>ename<span class="token punctuation">)</span><span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- LCASE(string2) 转换成小写</span>
<span class="token keyword">SELECT</span> <span class="token function">LCASE</span><span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- LEFT (string2,length) 从string2中的左边起取length个字符</span>
<span class="token comment">-- RIGTH(string2,length)</span>
<span class="token keyword">SELECT</span> <span class="token keyword">LEFT</span><span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- LENGTH (string) string 长度[按照字节]</span>
<span class="token keyword">SELECT</span> LENGTH<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- REPLACE (str,serch_str,replace_str)</span>
<span class="token comment">-- 在str中用replace_str替换search_str</span>
<span class="token comment">-- 如果是manager 就替换成经理</span>
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span><span class="token keyword">REPLACE</span><span class="token punctuation">(</span>job<span class="token punctuation">,</span><span class="token string">'MANAGER'</span><span class="token punctuation">,</span><span class="token string">'经理'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- STRCMP(string1,string2) 涿字符比较俩字串大小</span>
<span class="token keyword">SELECT</span> STRCMP<span class="token punctuation">(</span><span class="token string">'hsp'</span><span class="token punctuation">,</span><span class="token string">'Jsp'</span><span class="token punctuation">)</span><span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- SUBSTRING(str,position [length]) </span>
<span class="token comment">-- 从str的position开始【从1开始计算】，取length个字符</span>
<span class="token comment">-- 从ename列的第一个位置 开始取出2个字符</span>
<span class="token keyword">SELECT</span> SUBSTRING<span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- LTRTM(string2)RTRIM(string2) TRIM(string)</span>
<span class="token comment">-- 去除前段空格后端空格</span>
<span class="token keyword">SELECT</span> LTRIM<span class="token punctuation">(</span><span class="token string">' 韩顺平教育'</span><span class="token punctuation">)</span><span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> RTRIM<span class="token punctuation">(</span><span class="token string">'韩顺平教育 '</span><span class="token punctuation">)</span><span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> TRIM<span class="token punctuation">(</span><span class="token string">' 韩顺平教育 '</span><span class="token punctuation">)</span><span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h2 id="数学相关函数"><a href="#数学相关函数" class="header-anchor">#</a> 数学相关函数</h2> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/33.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 演示数学相关函数</span>
<span class="token comment">-- ABS(num) 绝对值</span>
<span class="token keyword">SELECT</span> ABS<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- BIN(decimal_number)   十进制转二进制</span>
<span class="token keyword">SELECT</span> BIN<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- CEILING(number2 )向上取整 ，得到比num2 大的最小整数</span>
<span class="token keyword">SELECT</span> CEILING<span class="token punctuation">(</span><span class="token number">1.1</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- CONV(number2,from_base,to base)  进制转化</span>
<span class="token comment">-- 下面的含义是 8 是十进制的8 转成2进制输出</span>
<span class="token keyword">SELECT</span> CONV<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- 下面的含义是 16 是十六进制的16 转成10进制输出</span>
<span class="token keyword">SELECT</span> CONV<span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- FLOOR(number2)    向下取整，得到比 num2小的最大整数</span>
<span class="token keyword">SELECT</span> FLOOR<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.1</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- FORMAT (number,decial_places) 保留小数位数,四舍五入</span>
<span class="token keyword">SELECT</span> <span class="token function">FORMAT</span><span class="token punctuation">(</span><span class="token number">78.125458</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- HEX(DeciamlNumber )转十六进制</span>
<span class="token keyword">SELECT</span> HEX<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- LEAST(number,number2[...]) 求最小值</span>
<span class="token keyword">SELECT</span> LEAST<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- MOD(nuerator,denominator)  求余</span>
<span class="token keyword">SELECT</span> <span class="token function">MOD</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- RAND([seed]) RAND([seed])  返回随机数 其范围为 0&lt;=v&lt;=1.0</span>
<span class="token comment">-- 如果使用rand() 每次返回不同的随机数，在0&lt;=v&lt;=1.0,如果seed不变，该随机数也不变了</span>
<span class="token keyword">SELECT</span> RAND<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="时间日期相关函数"><a href="#时间日期相关函数" class="header-anchor">#</a> 时间日期相关函数</h2> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/34.png" loading="lazy" class="lazy"></p> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/35.png" loading="lazy" class="lazy"></p> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/36.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 日期时间相关函数</span>
<span class="token comment">-- CURRENT_DATE( )        当前日期</span>
<span class="token keyword">SELECT</span> <span class="token keyword">CURRENT_DATE</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- CURRENT_TIME( )        当前时间</span>
<span class="token keyword">SELECT</span> <span class="token keyword">CURRENT_TIME</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- CURRENT_TIMESTAMP( )   当前时间戳</span>
<span class="token keyword">SELECT</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- 创建测试表 信息表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> mes<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	content <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	send_time <span class="token keyword">DATETIME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 添加一条记录</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> mes
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'北京新闻'</span><span class="token punctuation">,</span><span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> mes <span class="token keyword">VALUE</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'上海新闻'</span><span class="token punctuation">,</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> mes <span class="token keyword">VALUE</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'广州新闻'</span><span class="token punctuation">,</span><span class="token string">'2020-11-11'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token keyword">FROM</span> mes<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- 上应用案例</span>
<span class="token comment">-- 显示所有新闻信息，发布日期只显示日期，不用显示时间</span>
<span class="token keyword">SELECT</span> id<span class="token punctuation">,</span>content<span class="token punctuation">,</span><span class="token keyword">DATE</span><span class="token punctuation">(</span>send_time<span class="token punctuation">)</span>
	<span class="token keyword">FROM</span> mes<span class="token punctuation">;</span>
	
<span class="token comment">-- 请查询在10分钟内发布的帖子</span>
<span class="token keyword">SELECT</span>  <span class="token operator">*</span> <span class="token keyword">FROM</span> mes <span class="token comment">-- 发送时间加上10分钟 开是否大于或等于当前时间</span>
	<span class="token keyword">WHERE</span> DATE_ADD<span class="token punctuation">(</span>send_time<span class="token punctuation">,</span><span class="token keyword">INTERVAL</span> <span class="token number">10</span> <span class="token keyword">MINUTE</span><span class="token punctuation">)</span><span class="token operator">&gt;=</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mes <span class="token comment">--  现在时间减去10分钟 看是否在发送时间之前</span>
	<span class="token keyword">WHERE</span> send_time<span class="token operator">&gt;=</span> DATE_SUB<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">INTERVAL</span> <span class="token number">10</span> <span class="token keyword">MINUTE</span><span class="token punctuation">)</span>
	
<span class="token comment">-- 请在mysql的sql语句中求出 2011-11-11 和 1990-1-1 相差多少天</span>
<span class="token keyword">SELECT</span> DATEDIFF<span class="token punctuation">(</span><span class="token string">'2011-11-11'</span><span class="token punctuation">,</span><span class="token string">'1990-01-01'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- 请用mysql的 sql语句求出你活了多少天？[练习]</span>
<span class="token keyword">SELECT</span> DATEDIFF<span class="token punctuation">(</span><span class="token string">'2021-08-11'</span><span class="token punctuation">,</span><span class="token string">'2001-01-01'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL
<span class="token comment">-- 如果你能活80岁，求出你还能活多少天</span>
<span class="token comment">-- year可以是年月日时分秒都行 ，'2001-01-05'可以是date,datetime timestamp</span>
<span class="token keyword">SELECT</span> DATEDIFF<span class="token punctuation">(</span>DATE_ADD<span class="token punctuation">(</span><span class="token string">'2001-01-05'</span><span class="token punctuation">,</span><span class="token keyword">INTERVAL</span> <span class="token number">80</span> <span class="token keyword">YEAR</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL
<span class="token keyword">SELECT</span> TIMEDIFF<span class="token punctuation">(</span><span class="token string">'10:11:11'</span><span class="token punctuation">,</span><span class="token string">'06:10:10'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- YEAR|Month|DAY|DATE|(datetime)</span>
<span class="token keyword">SELECT</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token keyword">MONTH</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DAY</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span><span class="token string">'2013-11-10'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- unix_timestamp()1970-1-1 到现在的秒数</span>
<span class="token keyword">SELECT</span> UNIX_TIMESTAMP<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token operator">*</span><span class="token number">3600</span><span class="token operator">*</span><span class="token number">365</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- FROM_UNIXTIME()  可以把一个unix_timestamp秒数，转成指定格式的日期</span>
<span class="token comment">-- %Y-%m-%d 格式是规定好的，表示年月日</span>
<span class="token keyword">SELECT</span> FROM_UNIXTIME<span class="token punctuation">(</span><span class="token number">1618483484</span><span class="token punctuation">,</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> FROM_UNIXTIME<span class="token punctuation">(</span><span class="token number">1618493484</span><span class="token punctuation">,</span><span class="token string">'%Y-%m-%d %H:%i:%s'</span><span class="token punctuation">)</span><span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- 意义：在开发中，可以存放一个整数，然后表示时间，通过FROM_UNIXTIME转换</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br></div></div><h2 id="加密和系统函数"><a href="#加密和系统函数" class="header-anchor">#</a> 加密和系统函数</h2> <table><thead><tr><th>USER()</th> <th>查询用户</th></tr></thead> <tbody><tr><td><strong>DATABSE()</strong></td> <td><strong>数据库名称</strong></td></tr> <tr><td><strong>MD5（str)</strong></td> <td><strong>为字符串算出一个 MD5 32的字符串，常用(用户密码)加密</strong></td></tr> <tr><td><strong>PASSWORD(str)</strong></td> <td><strong>从原文密码str 计算并返回密码字符串, 通常用于对mysql数据库的用户密码加密</strong></td></tr></tbody></table> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 演示加密函数和系统函数</span>
<span class="token comment">-- USER()  查询用户</span>
<span class="token comment">-- 可以查看登录到mysql的有哪些用户，以及登录的ip</span>
<span class="token keyword">SELECT</span> <span class="token keyword">USER</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span> <span class="token comment">-- 用户@ip地址</span>
<span class="token comment">-- DATABASE() 查询当前使用数据库名称</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DATABASE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- MD5(str)   为字符串算出一个 MD5 32的字符串，常用(用户密码)加密</span>
<span class="token comment">-- root 密码是 hsp -&gt; 加密md5 -&gt;在数据库中存放的是加密后的密码</span>
<span class="token keyword">SELECT</span> MD5<span class="token punctuation">(</span><span class="token string">'hsp'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> LENGTH<span class="token punctuation">(</span>MD5<span class="token punctuation">(</span><span class="token string">'hsp'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- 演示用户表，存放密码时，是md5</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> users<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	NAME <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span><span class="token string">''</span><span class="token punctuation">,</span>
	pwd <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> users
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token string">'冯荣旭'</span><span class="token punctuation">,</span>MD5<span class="token punctuation">(</span><span class="token string">'hsp'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token keyword">FROM</span> users<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token comment">-- SQL 注入问题</span>
	<span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token operator">=</span><span class="token string">'冯荣旭'</span> <span class="token operator">AND</span> pwd <span class="token operator">=</span>MD5<span class="token punctuation">(</span><span class="token string">'hsp'</span><span class="token punctuation">)</span>
	
<span class="token comment">-- PASSWORD(str) -- 加密函数，MySQL数据库的用户密码就是 PASSWORD函数加密</span>
<span class="token keyword">SELECT</span> PASSWORD<span class="token punctuation">(</span><span class="token string">'hsp'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
<span class="token comment">-- select * from mysql.user \G 从原文密码str 计算并返回密码字符串</span>
<span class="token comment">-- 通常用于对mysql数据库的用户密码加密</span>
<span class="token comment">-- mysql.user 表示  数据库.表</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token keyword">FROM</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="流程控制函数"><a href="#流程控制函数" class="header-anchor">#</a> 流程控制函数</h2> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/37.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code> <span class="token comment">#演示流程控制语句</span>
 <span class="token comment"># IF(expr1,expr2,expr3) 如果expr1为True,则返回expr2 否则返回expr3</span>
 <span class="token keyword">SELECT</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token boolean">TRUE</span><span class="token punctuation">,</span><span class="token string">'北京'</span><span class="token punctuation">,</span><span class="token string">'上海'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
 <span class="token comment">#IFNULL(expr1,expr2)  如果expr1不为空null,则返回expr1,否则返回expr2</span>
 <span class="token keyword">SELECT</span> IFNULL<span class="token punctuation">(</span><span class="token string">'jack'</span><span class="token punctuation">,</span><span class="token string">'韩顺平教育'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span>
 <span class="token comment"># SELECT CASE WHEN expr1 THEN expr2 WHEN expr3 THEN expr4 ELSE expr5 END;[类似多重分支]</span>
 <span class="token comment"># 如果expr1 为TRUE,则返回expr2,如果 expr2 为t，返回 expr4,否则返回 expr5</span>
 <span class="token keyword">SELECT</span> <span class="token keyword">CASE</span> 
	<span class="token keyword">WHEN</span> <span class="token boolean">TRUE</span> <span class="token keyword">THEN</span> <span class="token string">'jack'</span> 
	<span class="token keyword">WHEN</span> <span class="token boolean">FALSE</span> <span class="token keyword">THEN</span> <span class="token string">'tom'</span> 
	<span class="token keyword">ELSE</span> <span class="token string">'mary'</span> <span class="token keyword">END</span>
<span class="token comment">-- 1.查询emp 表，如果comm 是null 则显示0.0</span>
<span class="token comment">--  老师说明,判断是否为null 要使用 is null,判断不为空 使用 is not</span>
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span><span class="token keyword">IF</span> <span class="token punctuation">(</span>comm <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">0.0</span><span class="token punctuation">,</span>comm<span class="token punctuation">)</span>
	<span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>IFNULL<span class="token punctuation">(</span>comm<span class="token punctuation">,</span><span class="token number">0.0</span><span class="token punctuation">)</span>
	<span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
	
<span class="token comment">-- 2.如果emp 表的 job 是 CLERK 则显示职员，如果是 MANAGER 则显示经理</span>
<span class="token comment">--   如果是SALESMAN 则显示 销售人员，其他正常显示</span>
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span><span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span> <span class="token keyword">CASE</span>
	<span class="token keyword">WHEN</span> job <span class="token operator">=</span><span class="token string">'CLERK'</span> <span class="token keyword">THEN</span> <span class="token string">'职员'</span> 
	<span class="token keyword">WHEN</span> job <span class="token operator">=</span><span class="token string">'manager'</span> <span class="token keyword">THEN</span> <span class="token string">'经理'</span> 
	<span class="token keyword">WHEN</span> job <span class="token operator">=</span><span class="token string">'SALESMAN'</span><span class="token keyword">THEN</span><span class="token string">'销售人员'</span>
	<span class="token keyword">ELSE</span> job <span class="token keyword">END</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">'job'</span><span class="token punctuation">,</span>job
	<span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="mysql-表查询-加强"><a href="#mysql-表查询-加强" class="header-anchor">#</a> mysql 表查询-加强</h2> <h3 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h3> <blockquote><p>在前面我们讲过mysql表的基本查询，但是都是对一张表进行的查询,这在实际的软件开发中，还远远的不够。
下面我们讲解的过程中，将使用前面创建三张表(emp,dept,salgrade)为大家演示如何进行多表查询</p></blockquote> <ul><li><p>使用where子句</p> <ul><li>如何查找1992.1.1后入职的员工</li></ul></li> <li><p>如何使用like操作符
%:表示0到多个字符二表示单个字符</p> <ul><li>如何显示首字符为S的员工姓名和工资</li> <li>如何显示第三个字符为大写O的所有员工的姓名和工资</li> <li>如何显示没有上级的雇员的情况</li></ul> <ul><li>查询表结构selectinc.sql</li></ul></li> <li><p>使用order by子句</p> <ul><li>如何按照工资的从低到高的顺序，显示雇员的信息</li> <li>按照部门号升序而雇员的工资降序排列，显示雇员信息</li></ul></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 查询加强</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> dept<span class="token punctuation">;</span>
<span class="token comment">-- 使用where子句</span>
<span class="token comment">-- 如何查找1992.1.1后入职的员工 日期类型可以直接比较,需要注意格式</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp
	<span class="token keyword">WHERE</span> hiredate <span class="token operator">&gt;=</span><span class="token string">'1992-01-01'</span>
		
<span class="token comment">-- 如何使用like操作符(模糊)</span>
  <span class="token comment">-- 表示0到多个任意   字符_:表示单个任意字符</span>
  <span class="token comment">-- 如何显示首字符为s的员工姓名和工资</span>
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">FROM</span> emp
	<span class="token keyword">WHERE</span> ename <span class="token operator">LIKE</span> <span class="token string">'S%'</span>
	
<span class="token comment">-- 如何显示第三个字符为大写O的所有员工的姓名和工资</span>
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">FROM</span> emp
	<span class="token keyword">WHERE</span> ename <span class="token operator">LIKE</span> <span class="token string">'__O%'</span>
	
	
<span class="token comment">-- 如何显示没有上级的雇员的情况</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp
	<span class="token keyword">WHERE</span> mgr <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
	
<span class="token comment">-- 查询表结构 </span>
<span class="token keyword">DESC</span> emp
<span class="token comment">-- 使用order by子句</span>
<span class="token comment">-- 如何按照工资的从低到高的顺序，显示雇员的信息</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token keyword">FROM</span> emp
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sal
	
<span class="token comment">-- 按照部门号升序而雇员的工资降序排列，显示雇员信息</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> deptno<span class="token punctuation">,</span>sal <span class="token keyword">DESC</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="分页查询"><a href="#分页查询" class="header-anchor">#</a> 分页查询</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/38.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 分页查询</span>
<span class="token comment">-- 按雇员的id号升序取出，每页显示3条记录，请分别显示第1页，第2页吗，第3页</span>
<span class="token comment">-- 第一页</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> empno
	<span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment">-- 第二页</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> empno
	<span class="token keyword">LIMIT</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment">-- 第三页</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> empno
	<span class="token keyword">LIMIT</span> <span class="token number">6</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span>
	
<span class="token comment">-- 推导公式</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> empno
	<span class="token keyword">LIMIT</span> 每页显示记录数<span class="token operator">*</span><span class="token punctuation">(</span>第几页<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>，每页显示记录数
	
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="使用分组函数和分组子句"><a href="#使用分组函数和分组子句" class="header-anchor">#</a> 使用分组函数和分组子句</h3> <blockquote><p>显示每种岗位的雇员总数、平均工资。</p> <p>显示雇员总数,以及获得补助的雇员数。</p> <p>显示管理者的总人数。
显示雇员工资的最大差额。</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 增强 group by 的使用</span>
<span class="token comment">-- (1)显示每种岗位的雇员总数、平均工资</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">AVG</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span>job
	<span class="token keyword">FROM</span> emp
	<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> job<span class="token punctuation">;</span>
	
<span class="token comment">-- (2) 显示雇员总数，以及获得补助的雇员数</span>
<span class="token comment">-- 思路：获得补助的雇员数 就是comm列 为非null</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span>comm<span class="token punctuation">)</span>
	<span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- 没有获得补助雇员数</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">IF</span><span class="token punctuation">(</span>comm <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">1</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- (3) 显示管理者的总人数</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> mgr<span class="token punctuation">)</span>
	<span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
	
<span class="token comment">-- (4) 显示雇员工资的最大工资</span>
<span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">MIN</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span>
	<span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="数据分组的总结"><a href="#数据分组的总结" class="header-anchor">#</a> 数据分组的总结</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/39.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 应用案例：请统计各个部门group by 的平均工资 avg</span>
<span class="token comment">-- 并且是大于1000的 having,并且按照平均工资从高到低排序， order by</span>
<span class="token comment">-- 取出前两行记录 limit 0,2	</span>
<span class="token keyword">SELECT</span> deptno<span class="token punctuation">,</span><span class="token function">AVG</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">AS</span> avg_sal
	<span class="token keyword">FROM</span> emp
	<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> deptno
	<span class="token keyword">HAVING</span> avg_sal<span class="token operator">&gt;</span><span class="token number">1000</span>
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> avg_sal <span class="token keyword">DESC</span>
	<span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="mysql多表查询"><a href="#mysql多表查询" class="header-anchor">#</a> mysql多表查询</h2> <h3 id="问题的引出-重点-难点"><a href="#问题的引出-重点-难点" class="header-anchor">#</a> 问题的引出(重点，难点)</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/40.png" loading="lazy" class="lazy"></p> <h3 id="说明"><a href="#说明" class="header-anchor">#</a> 说明</h3> <p><font color="#DC4040" size="4" face="黑体">多表查询是指基于两个和两个以上的表查询.在实际应用中,查询单个表可能不能满足你的需求.</font></p> <h3 id="多表查询练习"><a href="#多表查询练习" class="header-anchor">#</a> 多表查询练习</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/41.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 多表查询</span>
<span class="token comment">-- 显示雇员名，雇员工资及所在部门的名字【笛卡尔积】</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> salgrade
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> dept
<span class="token comment">/*
   分析
   1.雇员名，雇员工资 来自 emp表
   2.部门的名字，来自dept表
   (1)从第一张表中，取出一行和第二张表的每一行进行组合，返回结果[含有两张表的所有列]
   (2)一共返回的记录数第一张表行数*第二张表的行数
   (3)这样多表查询默认处理返回的结果，称为【笛卡尔积】
   (4)解决这个多表的关键就是要写出正确的过滤条件 where
   3.当我们需要指定显示某个表的列时，需要 表.列名
*/</span>
<span class="token keyword">SELECT</span>  ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>dname<span class="token punctuation">,</span>emp<span class="token punctuation">.</span>deptno 
	<span class="token keyword">FROM</span> emp<span class="token punctuation">,</span>dept
	<span class="token keyword">WHERE</span> emp<span class="token punctuation">.</span>deptno<span class="token operator">=</span>dept<span class="token punctuation">.</span>deptno
<span class="token comment">-- 小技巧：多表查询的条件下不能少于 表的个数-1，否则会出现笛卡尔积</span>
<span class="token comment">-- 如何显示部门号为10的部门名、员工名和工资</span>
<span class="token keyword">SELECT</span>  ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>dname<span class="token punctuation">,</span>emp<span class="token punctuation">.</span>deptno 
	<span class="token keyword">FROM</span> emp<span class="token punctuation">,</span>dept
	<span class="token keyword">WHERE</span> emp<span class="token punctuation">.</span>deptno<span class="token operator">=</span>dept<span class="token punctuation">.</span>deptno <span class="token operator">AND</span> emp<span class="token punctuation">.</span>deptno<span class="token operator">=</span><span class="token number">10</span>
	
<span class="token comment">-- 显示各个员工的姓名，工资，及其工资的级别</span>
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>grade
	<span class="token keyword">FROM</span> emp<span class="token punctuation">,</span>salgrade
	<span class="token keyword">WHERE</span> sal <span class="token operator">&gt;=</span> losal <span class="token operator">AND</span> sal<span class="token operator">&lt;=</span>hisal<span class="token punctuation">;</span>
	
<span class="token comment">-- 显示雇员名，雇员工资及所在部门的名字，并按部门排序</span>
  <span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>dname<span class="token punctuation">,</span>emp<span class="token punctuation">.</span>deptno
		<span class="token keyword">FROM</span> emp<span class="token punctuation">,</span>dept
		<span class="token keyword">WHERE</span> emp<span class="token punctuation">.</span>deptno<span class="token operator">=</span>dept<span class="token punctuation">.</span>deptno
		<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> emp<span class="token punctuation">.</span>deptno <span class="token keyword">DESC</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h3 id="自连接"><a href="#自连接" class="header-anchor">#</a> 自连接</h3> <p><font color="#DC4040" size="4" face="黑体">自连接是指在同一张表的连接查询[将同一张表看做两张表].</font></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 多表查询的 自连接</span>
<span class="token comment">-- 思考题：显示公司员工名字和他的上级名字</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token keyword">FROM</span> emp
<span class="token comment">-- 分析：员工名字 在emp,上级的名字 emp</span>
<span class="token comment">-- 员工和上级是通过 emp表的 mgr 列并联</span>
<span class="token comment">-- 小结：1.把同一张表当做两张表来使用</span>
<span class="token comment">--       2.需要给表取别名[表别名]</span>
<span class="token comment">--       3.列名不明确，可以指定列的别名，列名 AS 列的别名</span>
<span class="token keyword">SELECT</span> worker<span class="token punctuation">.</span>ename <span class="token keyword">AS</span> <span class="token string">'职员名'</span><span class="token punctuation">,</span>boss<span class="token punctuation">.</span>ename <span class="token keyword">AS</span> <span class="token string">'上级名'</span>
	<span class="token keyword">FROM</span> emp worker<span class="token punctuation">,</span>emp boss
	<span class="token keyword">WHERE</span> worker<span class="token punctuation">.</span>mgr<span class="token operator">=</span>boss<span class="token punctuation">.</span>empno<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="mysql表子查询"><a href="#mysql表子查询" class="header-anchor">#</a> mysql表子查询</h2> <h3 id="什么是子查询"><a href="#什么是子查询" class="header-anchor">#</a> 什么是子查询</h3> <p><font color="#DC4040" size="4" face="黑体">子查询是指嵌入在其它 sql 语句中的 select 语句,也叫嵌套查询</font></p> <h3 id="单行子查询"><a href="#单行子查询" class="header-anchor">#</a> 单行子查询</h3> <p><font color="#DC4040" size="4" face="黑体">单行子查询是指只返回一行数据的子查询语句</font></p> <blockquote><p>请思考：如何显示与 SMITH 同一部门的所有员工?</p></blockquote> <h3 id="多行子查询"><a href="#多行子查询" class="header-anchor">#</a> 多行子查询</h3> <p><font color="#DC4040" size="4" face="黑体">多行子查询指返回多行数据的子查询 ,使用关键字 in</font></p> <blockquote><p>如何查询和部门10的工作相同的雇员的名字、岗位、工资、部门号、但是不含10自己的。</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 子查询的演示</span>
<span class="token comment">-- 请思考：如何显示与SMITH 同一部门的所有员工</span>
<span class="token comment">/*
  1.先查询到SMITH的部门号得到
  2.把上面的select语句当做一个子查询来使用
*/</span>
<span class="token keyword">SELECT</span> deptno
	<span class="token keyword">FROM</span> emp
	<span class="token keyword">WHERE</span> ename<span class="token operator">=</span><span class="token string">'SMITH'</span>
	
<span class="token keyword">SELECT</span> <span class="token operator">*</span>
	<span class="token keyword">FROM</span> emp
	<span class="token keyword">WHERE</span> deptno <span class="token operator">=</span><span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span> deptno
		<span class="token keyword">FROM</span> emp
		<span class="token keyword">WHERE</span> ename<span class="token operator">=</span><span class="token string">'SMITH'</span>
	<span class="token punctuation">)</span>
<span class="token comment">-- 课堂练习：如何查询和部门10的工作相同的雇员的</span>
<span class="token comment">--   名字、岗位、工资、部门号、但是不含10部门自己的</span>
<span class="token comment">/*
   1.查询到10号部门有哪些工作
   2.把上面查询的结果当做子查询
*/</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> job 
	<span class="token keyword">FROM</span> emp
	<span class="token keyword">WHERE</span> deptno<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
	
<span class="token comment">-- 下面语句完整</span>
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>job<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>deptno
	<span class="token keyword">FROM</span> emp
	<span class="token keyword">WHERE</span> job <span class="token operator">IN</span> <span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> job 
		<span class="token keyword">FROM</span> emp
		<span class="token keyword">WHERE</span> deptno<span class="token operator">=</span><span class="token number">10</span>
	<span class="token punctuation">)</span><span class="token operator">AND</span> deptno <span class="token operator">!=</span><span class="token number">10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h3 id="在多行子查询中使用-all-操作符"><a href="#在多行子查询中使用-all-操作符" class="header-anchor">#</a> 在多行子查询中使用 all 操作符</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- all 和 any 的使用</span>
<span class="token comment">-- 请思考：显示工资比部门30的所有员工的工资高的员工的姓名、工资和部门号</span>
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>deptno
	<span class="token keyword">FROM</span> emp
	<span class="token keyword">WHERE</span> sal<span class="token operator">&gt;</span> <span class="token keyword">ALL</span><span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span> sal
		<span class="token keyword">FROM</span> emp
		<span class="token keyword">WHERE</span> deptno <span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>
		
<span class="token comment">-- 可以这样写</span>
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>deptno
	<span class="token keyword">FROM</span> emp
	<span class="token keyword">WHERE</span> sal<span class="token operator">&gt;</span> <span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span>
		<span class="token keyword">FROM</span> emp
		<span class="token keyword">WHERE</span> deptno <span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>
		
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="在多行子查询中使用-any-操作符"><a href="#在多行子查询中使用-any-操作符" class="header-anchor">#</a> 在多行子查询中使用 any 操作符</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 请思考：如何显示工资比部门30的其中一个员工的工资高的员工的姓名、工资和部门号</span>
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>deptno
	<span class="token keyword">FROM</span> emp
	<span class="token keyword">WHERE</span> sal<span class="token operator">&gt;</span> <span class="token keyword">ANY</span><span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span> sal
		<span class="token keyword">FROM</span> emp
		<span class="token keyword">WHERE</span> deptno <span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>
<span class="token comment">-- 可以这样写</span>
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>deptno
	<span class="token keyword">FROM</span> emp
	<span class="token keyword">WHERE</span> sal<span class="token operator">&gt;</span> <span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span>
		<span class="token keyword">FROM</span> emp
		<span class="token keyword">WHERE</span> deptno <span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="多列子查询"><a href="#多列子查询" class="header-anchor">#</a> 多列子查询</h3> <p><font color="#DC4040" size="4" face="黑体">多列子查询是指查询返回多个列数据的子查询语句。</font></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 多列子查询</span>
<span class="token comment">-- 请思考如何查询与allen的部门和岗位完全相同的所有雇员(并且不含smith本人)</span>
<span class="token comment">-- (字段1，字段2...)=(select 字段1 ，字段2 from...)</span>
<span class="token comment">-- 分析：1.得到allen的部门和岗位</span>
<span class="token keyword">SELECT</span> deptno<span class="token punctuation">,</span>job
	<span class="token keyword">FROM</span> emp
	<span class="token keyword">WHERE</span> ename<span class="token operator">=</span><span class="token string">'ALLEN'</span>
	
<span class="token comment">-- 分析：2.把上面的查询当做子查询来使用，并且使用多列子查询的语法进行匹配</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> 	
	<span class="token keyword">FROM</span> emp
	<span class="token keyword">WHERE</span> <span class="token punctuation">(</span>deptno<span class="token punctuation">,</span>job<span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span> deptno<span class="token punctuation">,</span>job
		<span class="token keyword">FROM</span> emp
		<span class="token keyword">WHERE</span> ename<span class="token operator">=</span><span class="token string">'ALLEN'</span>
		<span class="token punctuation">)</span><span class="token operator">AND</span> ename <span class="token operator">!=</span> <span class="token string">'ALLEN'</span>
		
<span class="token comment">-- 请查询和宋江同学数学，英语，语文</span>
<span class="token comment">-- 成绩完全相同的同学		</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span>
	<span class="token keyword">FROM</span> student
	<span class="token keyword">WHERE</span> <span class="token punctuation">(</span>chinese<span class="token punctuation">,</span>english<span class="token punctuation">,</span>math<span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span>	
		<span class="token keyword">SELECT</span> chinese<span class="token punctuation">,</span>english<span class="token punctuation">,</span>math 
		<span class="token keyword">FROM</span> student
		<span class="token keyword">WHERE</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token operator">=</span><span class="token string">'宋江'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="在-from-子句中使用子查询"><a href="#在-from-子句中使用子查询" class="header-anchor">#</a> 在 from 子句中使用子查询</h3> <blockquote><p>请思考:查找每个部门工资高于本部门平均工资的人的资料</p> <p>这里要用到数据查询的小技巧，把一个子查询当作一个临时表使用
请思考:查找每个部门工资最高的人的详细资料</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 子查询 练习</span>
<span class="token comment">-- 请思考：查找每个部门工资高于本部门平均工资的人的资料</span>
<span class="token comment">-- 这里要用到数据查询的小技巧，把一个子查询当做一个临时表使用</span>
<span class="token comment">-- 1.先得到每个部门的 部门号和对应的平均工资</span>
<span class="token keyword">SELECT</span> deptno<span class="token punctuation">,</span><span class="token function">AVG</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span>
	<span class="token keyword">FROM</span> emp
	<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> deptno
	
	
<span class="token comment">-- 2.把上面的结果当做子查询，和emp进行多表查询</span>
<span class="token keyword">SELECT</span>  ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span><span class="token keyword">temp</span><span class="token punctuation">.</span>avg_sal<span class="token punctuation">,</span>emp<span class="token punctuation">.</span>deptno
	<span class="token keyword">FROM</span> emp<span class="token punctuation">,</span><span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span> deptno<span class="token punctuation">,</span><span class="token function">AVG</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">AS</span> avg_sal
		<span class="token keyword">FROM</span> emp
		<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> deptno
		<span class="token punctuation">)</span><span class="token keyword">temp</span>
		<span class="token keyword">WHERE</span> emp<span class="token punctuation">.</span>deptno<span class="token operator">=</span><span class="token keyword">temp</span><span class="token punctuation">.</span>deptno <span class="token operator">AND</span> emp<span class="token punctuation">.</span>sal<span class="token operator">&gt;</span><span class="token keyword">temp</span><span class="token punctuation">.</span>avg_sal
		
<span class="token comment">-- 查找每个部门工资最高的人详细资料</span>
<span class="token keyword">SELECT</span>  ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span><span class="token keyword">temp</span><span class="token punctuation">.</span>max_sal<span class="token punctuation">,</span>emp<span class="token punctuation">.</span>deptno
	<span class="token keyword">FROM</span> emp<span class="token punctuation">,</span><span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span> deptno<span class="token punctuation">,</span><span class="token function">MAX</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">AS</span> max_sal
		<span class="token keyword">FROM</span> emp
		<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> deptno
		<span class="token punctuation">)</span><span class="token keyword">temp</span>
		<span class="token keyword">WHERE</span> emp<span class="token punctuation">.</span>deptno<span class="token operator">=</span><span class="token keyword">temp</span><span class="token punctuation">.</span>deptno <span class="token operator">AND</span> emp<span class="token punctuation">.</span>sal<span class="token operator">=</span><span class="token keyword">temp</span><span class="token punctuation">.</span>max_sal
		
<span class="token comment">-- 查询每个部门的信息(包括：部门名，编号，地址)和人员数量</span>
<span class="token comment">-- 1.部门名，编号，地址</span>
<span class="token comment">-- 2.各个部门的数量</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>deptno 
	<span class="token keyword">FROM</span> emp
	<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> deptno
	
	
	
<span class="token keyword">SELECT</span> dname<span class="token punctuation">,</span>dept<span class="token punctuation">.</span>deptno <span class="token punctuation">,</span>loc<span class="token punctuation">,</span>tmp<span class="token punctuation">.</span>per_num <span class="token keyword">AS</span> <span class="token string">'人数'</span>
	<span class="token keyword">FROM</span> dept<span class="token punctuation">,</span><span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> per_num<span class="token punctuation">,</span>deptno 
		<span class="token keyword">FROM</span> emp
		<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> deptno
		<span class="token punctuation">)</span> tmp
		<span class="token keyword">WHERE</span> tmp<span class="token punctuation">.</span>deptno<span class="token operator">=</span>dept<span class="token punctuation">.</span>deptno
		
<span class="token comment">-- 还有一种写法 表.* 表示将该所有列都显示出来</span>
<span class="token comment">-- 在多表查询中，当多个表的列不重复时，才可以直接写列名</span>
<span class="token keyword">SELECT</span> tmp<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token punctuation">,</span>dname<span class="token punctuation">,</span>loc
	<span class="token keyword">FROM</span> dept<span class="token punctuation">,</span><span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> per_num<span class="token punctuation">,</span>deptno
		<span class="token keyword">FROM</span> emp
		<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> deptno
		<span class="token punctuation">)</span> tmp
		<span class="token keyword">WHERE</span> tmp<span class="token punctuation">.</span>deptno<span class="token operator">=</span>dept<span class="token punctuation">.</span>deptno	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><h2 id="表复制"><a href="#表复制" class="header-anchor">#</a> 表复制</h2> <h3 id="自我复制数据-蠕虫复制"><a href="#自我复制数据-蠕虫复制" class="header-anchor">#</a> 自我复制数据(蠕虫复制)</h3> <p><font color="#DC4040" size="4" face="黑体">有时，为了对某个sql语句进行效率测试，我们需要海量数据时，可以使用此法为表创建海量数据。</font></p> <blockquote><p>思考题:如何删除掉一张表重复记录</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 表的复制</span>
<span class="token comment">-- 为了对某个sql语句进行效率测试，我们需要海量数据时，可以使用此法为表创建海量数据</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> my_tab01<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	sal <span class="token keyword">DOUBLE</span><span class="token punctuation">,</span>
	job <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	deptno <span class="token keyword">INT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">DESC</span> my_tab01
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> my_tab01
<span class="token comment">-- 演示如何自我复制</span>
<span class="token comment">-- 1.先把emp表的记录复制到my_tab01</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> my_tab01
	<span class="token punctuation">(</span>id<span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span>sal<span class="token punctuation">,</span>job<span class="token punctuation">,</span>deptno<span class="token punctuation">)</span>
	<span class="token keyword">SELECT</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>job<span class="token punctuation">,</span>deptno <span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
	
<span class="token comment">-- 2.自我复制</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> my_tab01
	<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> my_tab01<span class="token punctuation">;</span>
	
<span class="token comment">-- 如何删除一张表重复记录</span>
<span class="token comment">-- 1.先创建一张表 my_tab02,</span>
<span class="token comment">-- 2.让 my_tab02 有重复的记录</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> my_tab02 <span class="token operator">LIKE</span> emp<span class="token punctuation">;</span><span class="token comment">-- 这个语句把emp表的结构(列)，复制到my_tab02</span>
<span class="token keyword">DESC</span> my_tab02<span class="token punctuation">;</span> 
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> my_tab02
	<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
	
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> my_tab02<span class="token punctuation">;</span>
<span class="token comment">-- 3.考虑去重</span>
<span class="token comment">/*
	(1)先创建一张临时表，my_tmp,该表的结构和 my_tab02一样
	(2)把my_tmp的记录通过 distinct关键字 处理后，把记录复制到my_tmp
	(3)清除掉my_tab02 记录
	(4)把 my_tmp 表的记录复制到my_tab02
	(5)drop 掉 临时表my_tmp
*/</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> my_tmp
<span class="token comment">-- (1)先创建一张临时表，my_tmp,该表的结构和 my_tab02一样</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> my_tmp <span class="token operator">LIKE</span> my_tab02
<span class="token comment">-- (2)把my_tmp的记录通过 distinct关键字 处理后，把记录复制到my_tmp</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> my_tmp
	<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> my_tab02
<span class="token comment">-- (3)清除掉my_tab02 记录</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> my_tab02
<span class="token comment">-- (4)把 my_tmp 表的记录复制到my_tab02</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> my_tab02
	<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> my_tmp
<span class="token comment">-- (5)drop 掉 临时表my_tmp</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> my_tmp
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> my_tab02
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><h2 id="合并查询"><a href="#合并查询" class="header-anchor">#</a> 合并查询</h2> <h3 id="介绍-2"><a href="#介绍-2" class="header-anchor">#</a> 介绍</h3> <p><font color="#DC4040" size="4" face="黑体">有时在实际应用中，为了合并多个select语句的结果，可以使用集合操作符号union , union all </font></p> <ol><li><p><strong>nuion all</strong></p> <ul><li><font color="#DC4040" size="4" face="黑体">该操作符用于取得两个结果集的并集。当使用该操作符时，不会取消重复行。</font></li></ul></li> <li><p><strong>union</strong></p> <ul><li><font color="#DC4040" size="4" face="黑体">该操作赋与union all相似,但是会自动去掉结果集中重复行。</font>.</li></ul></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 合并查询</span>
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>job <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> sal<span class="token operator">&gt;</span><span class="token number">2500</span> <span class="token comment">-- 5</span>
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>job <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> job<span class="token operator">=</span><span class="token string">'MANAGER'</span> <span class="token comment">-- 3</span>
<span class="token comment">-- union all 就是将两个查询结果合并，不会去重</span>
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>job <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> sal<span class="token operator">&gt;</span><span class="token number">2500</span>
<span class="token keyword">UNION</span> <span class="token keyword">ALL</span>
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>job <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> job<span class="token operator">=</span><span class="token string">'MANAGER'</span><span class="token comment">-- 8</span>
<span class="token comment">-- union  就是两个查询结果合并，会去重，不会出现同步记录</span>
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>job <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> sal<span class="token operator">&gt;</span><span class="token number">2500</span>
<span class="token keyword">UNION</span> 
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>job <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> job<span class="token operator">=</span><span class="token string">'MANAGER'</span><span class="token comment">-- 6</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="外连接"><a href="#外连接" class="header-anchor">#</a> 外连接</h3> <ol><li><font color="#DC4040" size="4" face="黑体">左外连接(如果左侧的表完全显示我们就说是左外连接) select...from 表1 left join 表2 on条件 [表1：左表 表2：右表]</font></li> <li><font color="#DC4040" size="4" face="黑体">右外连接(如果右侧的表完全显示我们就说是右外连接) select...from 表1 rigth join 表2 on条件 [表1：左表 表2：右表]</font></li></ol> <blockquote><p>-- 表stu                                 --表exam</p> <p>id       name                           id      grade</p> <p>1         Jack                              1         56</p> <p>2         Tom                             2         76</p> <p>3         Kity                             11          8</p> <p>4         nono</p></blockquote> <ol start="3"><li><strong>使用左连接(显示所有人的成绩，如果没有成绩，也要显示该人的姓名和id号,成绩显示为空)</strong></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 外连接</span>
<span class="token comment">-- 比如:列出部门名称和这些部门的员工名称和工作，同时要求 显示出那些没有员工的部门</span>
<span class="token comment">-- 使用我们学习过的多表查询的sql,看看效果</span>
<span class="token keyword">SELECT</span> dname<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>job 
	<span class="token keyword">FROM</span> emp<span class="token punctuation">,</span>dept
	<span class="token keyword">WHERE</span> emp<span class="token punctuation">.</span>deptno<span class="token operator">=</span>dept<span class="token punctuation">.</span>deptno
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> dname
	
<span class="token comment">-- 先创建 stu</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stu<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> stu <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'Jack'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'tom'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'kity'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'nono'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> stu<span class="token punctuation">;</span>
<span class="token comment">-- 创建exam</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> exam<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	grade <span class="token keyword">INT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> exam <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">56</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">76</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> exam<span class="token punctuation">;</span>
<span class="token comment">-- 使用左连接</span>
<span class="token comment">-- (显示所有人的成绩，如果没有成绩，也要显示该人的姓名和id号，成绩显示为空)</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span>stu<span class="token punctuation">.</span>id<span class="token punctuation">,</span>grade
	<span class="token keyword">FROM</span> stu<span class="token punctuation">,</span>exam
	<span class="token keyword">WHERE</span> stu<span class="token punctuation">.</span>id<span class="token operator">=</span>exam<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
	
<span class="token comment">-- 改成左外连接</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span>stu<span class="token punctuation">.</span>id<span class="token punctuation">,</span>grade
	<span class="token keyword">FROM</span> stu <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> exam
	<span class="token keyword">ON</span> stu<span class="token punctuation">.</span>id<span class="token operator">=</span>exam<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
	
<span class="token comment">-- 使用右外连接(显示所有人的成绩，如果没有名字匹配，显示为空)</span>
<span class="token comment">-- 即：右边的表(exam)和左表没有匹配的记录，也会把右表的记录显示出来</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span>stu<span class="token punctuation">.</span>id<span class="token punctuation">,</span>grade
	<span class="token keyword">FROM</span> stu <span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> exam
	<span class="token keyword">ON</span> stu<span class="token punctuation">.</span>id<span class="token operator">=</span>exam<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h3 id="课堂练习-2"><a href="#课堂练习-2" class="header-anchor">#</a> 课堂练习</h3> <blockquote><p>列出部门名称和这些部门的员工信息(名字和工作)，同时列出那些没有员工的部门名。5min
1．使用左外连接实现</p> <p>2.使用右外连接实现</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 列出部门名称和这些部门的员工信息(名字和工作)，</span>
<span class="token comment">-- 同时列出那些没有员工的部门名。5min</span>
<span class="token comment">-- 1使用左外连接实现</span>
<span class="token keyword">SELECT</span> dname<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>job
	<span class="token keyword">FROM</span> dept <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> emp
	<span class="token keyword">ON</span> emp<span class="token punctuation">.</span>deptno<span class="token operator">=</span>dept<span class="token punctuation">.</span>deptno
<span class="token comment">-- 2.使用右外连接实现	</span>
<span class="token keyword">SELECT</span> dname<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>job
	<span class="token keyword">FROM</span> emp <span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> dept
	<span class="token keyword">ON</span> emp<span class="token punctuation">.</span>deptno<span class="token operator">=</span>dept<span class="token punctuation">.</span>deptno
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="mysql约束"><a href="#mysql约束" class="header-anchor">#</a> mysql约束</h2> <h3 id="基本介绍"><a href="#基本介绍" class="header-anchor">#</a> 基本介绍</h3> <p><font color="#DC4040" size="4" face="黑体">约束用于确保数据库的数据满足特定的商业规则。在mysql中，约束包括: not null、unique,primary key,foreign key,和check五种。</font></p> <h3 id="primary-key-主键-基本使用"><a href="#primary-key-主键-基本使用" class="header-anchor">#</a> primary key(主键)-基本使用</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/43.png" loading="lazy" class="lazy"></p> <ul><li>细节说明:</li></ul> <ol><li><font color="#DC4040" size="4" face="黑体">primary key不能重复而且不能为null。</font></li> <li><font color="#DC4040" size="4" face="黑体">一张表最多只能有一个主键,但可以是复合主键主键的指定方式有两种</font></li> <li><font color="#DC4040" size="4" face="黑体">直接在字段名后指定:字段名primakry key在表定义最后写primary key(列名);</font></li> <li><font color="#DC4040" size="4" face="黑体">使用desc表名，可以看到primary key的情况.</font></li> <li><font color="#DC4040" size="4" face="黑体">在实际开发中，每个表往往都会设计一个主键.</font></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 主键使用</span>
<span class="token comment">-- id name email</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t17<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span><span class="token comment">-- 表示id列是主键</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment">-- 主键列的值是不可以</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t17
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'jack'</span><span class="token punctuation">,</span><span class="token string">'jack@sohu.com'</span><span class="token punctuation">)</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t17
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'tom'</span><span class="token punctuation">,</span><span class="token string">'tom@sohu.com'</span><span class="token punctuation">)</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t17<span class="token punctuation">(</span>
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'frx'</span><span class="token punctuation">,</span><span class="token string">'frx@sohu.com'</span><span class="token punctuation">)</span>
		
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t17
<span class="token comment">-- 主键使用的细节讨论</span>
<span class="token comment">-- primary key 不能重复且不能为null</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t17<span class="token punctuation">(</span>
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token string">'frx'</span><span class="token punctuation">,</span><span class="token string">'frx@sohu.com'</span><span class="token punctuation">)</span>
	
<span class="token comment">-- 一张表最多只能有一个主键，但可以是复合主键(比如 id+name)</span>
<span class="token comment">-- 演示复合主键</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t18<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
	email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- 这里就是复合主键</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t18
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'tom'</span><span class="token punctuation">,</span><span class="token string">'tom@sohu.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t18
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'jack'</span><span class="token punctuation">,</span><span class="token string">'jack@sohu.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t18
<span class="token comment">-- 主键的指定方式 有两种</span>
<span class="token comment">-- 直接在字段名后指定：字段名 primary key</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t19<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
	email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment">-- 在表定义最后写 primary key(列名);</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t20<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
	email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment">-- 使用desc 表名，可以看到primary key的情况下</span>
<span class="token keyword">DESC</span> t20 <span class="token comment">-- 查看t20 表的结果，显示约束情况</span>
<span class="token keyword">DESC</span> t18	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><h3 id="not-null和unique-唯一"><a href="#not-null和unique-唯一" class="header-anchor">#</a> not null和unique(唯一)</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/44.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- unique的使用</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t21<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span><span class="token comment">-- 表示id列是不可以重复的</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t21
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'jack'</span><span class="token punctuation">,</span><span class="token string">'jack@sohu.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t21
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'tom'</span><span class="token punctuation">,</span><span class="token string">'tom@sohu.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
	
<span class="token comment">-- unique的使用细节</span>
<span class="token comment">-- 1.如果没有指定 not null,则unique字段可以有多个null</span>
<span class="token comment">-- 如果一个列(字段)，是unique not null 使用效果类似 primary key</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t21
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token string">'tom'</span><span class="token punctuation">,</span><span class="token string">'tom@sohu.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 2.一张表可以有多个unique字段</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t22<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span><span class="token comment">-- 表示id列是不可以重复的</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span> <span class="token comment">-- 表示name不可以重复</span>
	email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">DESC</span> t22
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="foreign-key-外键"><a href="#foreign-key-外键" class="header-anchor">#</a> foreign key(外键)</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/45.png" loading="lazy" class="lazy"></p> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/46.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 外键演示</span>
<span class="token comment">-- 创建 主表 my_class</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> my_class<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span> <span class="token comment">-- 班级编号</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment">-- 创建 从表 my_stu</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> my_stu<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span><span class="token comment">-- 学生编号</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span><span class="token punctuation">,</span>
	class_id <span class="token keyword">INT</span><span class="token punctuation">,</span> <span class="token comment">-- 学生所在班级编号 </span>
	<span class="token comment">-- 下面指定外键关系</span>
	<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>class_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> my_class<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span>
	
<span class="token comment">-- 测试数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> my_class
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token string">'java'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token string">'web'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> my_class	
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> my_stu
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'tom'</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> my_stu
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'jack'</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> my_stu
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'marry'</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">-- 可以。外键没有写 not null</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> my_stu
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'frx'</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- 添加失败 300号班机不存在</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> my_stu
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> my_class
<span class="token comment">-- 一旦建立主外键关系，数据不能随意删除了</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> my_class
	<span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token number">100</span> <span class="token comment">-- 没有任何一条记录指向 主表100,就可以删去</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="check"><a href="#check" class="header-anchor">#</a> check</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/47.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 演示check的使用</span>
<span class="token comment">-- mysql5.7目前还不支持check,只做语法校验，但不会生效</span>
<span class="token comment">-- 测试</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t23<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	sex <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>sex <span class="token operator">IN</span><span class="token punctuation">(</span><span class="token string">'man'</span><span class="token punctuation">,</span><span class="token string">'woman'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	sal <span class="token keyword">DOUBLE</span> <span class="token keyword">CHECK</span><span class="token punctuation">(</span>sal<span class="token operator">&gt;</span><span class="token number">1000</span> <span class="token operator">AND</span> sal<span class="token operator">&lt;</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment">-- 添加数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t23
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'jack'</span><span class="token punctuation">,</span><span class="token string">'mid'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t23
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="商店售货系统表设计案例"><a href="#商店售货系统表设计案例" class="header-anchor">#</a> 商店售货系统表设计案例</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/48.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> goods_<span class="token punctuation">(</span>
	goods_id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
	goods_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span><span class="token punctuation">,</span>
	unitprice  <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> 
		<span class="token keyword">CHECK</span> <span class="token punctuation">(</span>unitprice<span class="token operator">&gt;=</span><span class="token number">1.0</span> <span class="token operator">AND</span> unitprice <span class="token operator">&lt;=</span><span class="token number">9999.99</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	category   <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span>
	provider   <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> customer<span class="token punctuation">(</span>
	customer_id <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span><span class="token punctuation">,</span>
	address <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span><span class="token punctuation">,</span>
	email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token keyword">UNIQUE</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	sex <span class="token keyword">ENUM</span><span class="token punctuation">(</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">)</span><span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token comment">-- 这里使用枚举类型</span>
	card_Id <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> purchase<span class="token punctuation">(</span>
	order_id <span class="token keyword">INT</span> <span class="token keyword">UNSIGNED</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
	customer_id <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">-- 指向customer表的customer_id</span>
	goods_id <span class="token keyword">INT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token comment">-- 指向goods表的goods_id </span>
	nums <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span>
	<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>customer_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> customer<span class="token punctuation">(</span>customer_id<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>goods_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> goods_<span class="token punctuation">(</span>goods_id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">DESC</span> customer
	<span class="token keyword">DESC</span> goods_
	<span class="token keyword">DESC</span> purchase
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="自增长"><a href="#自增长" class="header-anchor">#</a> 自增长</h2> <h3 id="自增长基本介绍"><a href="#自增长基本介绍" class="header-anchor">#</a> 自增长基本介绍</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/49.png" loading="lazy" class="lazy"></p> <h3 id="自增长使用细节"><a href="#自增长使用细节" class="header-anchor">#</a> 自增长使用细节</h3> <ol><li><font color="#DC4040" size="4" face="黑体">一般来说自增长是和primary key配合使用的</font></li> <li><font color="#DC4040" size="4" face="黑体">自增长也可以单独使用[但是需要配合一个unique]</font></li> <li><font color="#DC4040" size="4" face="黑体">自增长修饰的字段为整数型的(虽然小数也可以但是非常非常少这样使用)</font></li> <li><font color="#DC4040" size="4" face="黑体">自增长默认从1开始,你也可以通过如下命令修改altertable表名auto increment=新的开始值;</font></li> <li><font color="#DC4040" size="4" face="黑体">如果你添加数据时，给自增长字段(列)指定的有值，则以指定的值为准,如果指定了自增长，一般来说，就按照自增长的规则来添加数据</font></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 演示自增长的使用</span>
<span class="token comment">-- 创建表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t24<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">DESC</span> t24
<span class="token comment">-- 测试自增长的使用</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t24
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token string">'jack@qq.com'</span><span class="token punctuation">,</span><span class="token string">'jack'</span><span class="token punctuation">)</span>
	
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t24
	<span class="token punctuation">(</span>email<span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'jack@qq.com'</span><span class="token punctuation">,</span><span class="token string">'jack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t24
<span class="token comment">-- 修改默认的自增长开始值</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t25 <span class="token keyword">AUTO_INCREMENT</span> <span class="token operator">=</span><span class="token number">100</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t25<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t25
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token string">'jack@qq.com'</span><span class="token punctuation">,</span><span class="token string">'jack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t25
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">666</span><span class="token punctuation">,</span><span class="token string">'jack@qq.com'</span><span class="token punctuation">,</span><span class="token string">'jack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t25
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token string">'mary@qq.com'</span><span class="token punctuation">,</span><span class="token string">'mary'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t25<span class="token punctuation">;</span>
<span class="token comment">-- 如果指定了自增长，一般来说，就按照自增长的规则来添加数据</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h2 id="mysql索引-index"><a href="#mysql索引-index" class="header-anchor">#</a> mysql索引(index)</h2> <h3 id="索引快速入门"><a href="#索引快速入门" class="header-anchor">#</a> 索引快速入门</h3> <ol><li><font color="#DC4040" size="4" face="黑体">说起提高数据库性能,索引是最物美价廉的东西了。不用加内存，不用改程序,不用调sql，查询速度就可能提高百倍干倍。</font></li> <li><font color="#DC4040" size="4" face="黑体">没有建立索引的字段，查询起来依旧很慢</font></li></ol> <h3 id="索引的原理"><a href="#索引的原理" class="header-anchor">#</a> 索引的原理</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/50.png" loading="lazy" class="lazy"></p> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/51.png" loading="lazy" class="lazy"></p> <ol><li><font color="#DC4040" size="4" face="黑体">没有索引为什么会慢?因为全表扫描.</font></li> <li><font color="#DC4040" size="4" face="黑体">使用索引为什么会快?形成一个索引的数据结构，比如二叉树</font></li></ol> <ul><li>索引的代价
<ol><li><font color="#DC4040" size="4" face="黑体">磁盘占用</font></li> <li><font color="#DC4040" size="4" face="黑体">对dml(update delete insert)语句的效率影响,</font></li></ol></li></ul> <h3 id="索引的类型"><a href="#索引的类型" class="header-anchor">#</a> 索引的类型</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/52.png" loading="lazy" class="lazy"></p> <h3 id="索引使用"><a href="#索引使用" class="header-anchor">#</a> 索引使用</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/53.png" loading="lazy" class="lazy"></p> <ol start="5"><li><strong>查询索引（三种方式）</strong></li></ol> <p><font color="#DC4040" size="4" face="黑体">show index(ex) from table_name;</font></p> <p><font color="#DC4040" size="4" face="黑体">show keys from table_name;</font></p> <p><font color="#DC4040" size="4" face="黑体">desc table_Name;</font></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 演示mysql的索引的使用</span>
<span class="token comment">-- 创建索引</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t25<span class="token punctuation">(</span>	
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	
<span class="token comment">-- 查询表是否有索引</span>
<span class="token keyword">SHOW</span> INDEXES <span class="token keyword">FROM</span> t25<span class="token punctuation">;</span>
<span class="token comment">-- 添加索引</span>
<span class="token comment">-- 添加唯一索引</span>
<span class="token keyword">CREATE</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">INDEX</span> id_index <span class="token keyword">ON</span> t25<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 添加普通索引方式1</span>
<span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> id_index <span class="token keyword">ON</span> t25<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 如何选择</span>
<span class="token comment">-- 1.如果某列的值，是不会重复的，则优先考虑使用unique索引,否则使用普通索引</span>
<span class="token comment">-- 添加普通索引方式2</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t25 <span class="token keyword">ADD</span> <span class="token keyword">INDEX</span> id_index<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token comment">-- 添加主键索引</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t26<span class="token punctuation">(</span>	
	id <span class="token keyword">INT</span> <span class="token punctuation">,</span><span class="token comment">-- 1. primary key</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 2.</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t26 <span class="token keyword">ADD</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t26
<span class="token comment">-- 删除索引</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t25
<span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> id_index <span class="token keyword">ON</span> t25
<span class="token comment">-- 删除主键索引</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t26 <span class="token keyword">DROP</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span>
<span class="token comment">-- 修改索引，先删除，在添加新的索引</span>
<span class="token comment">-- 查询索引</span>
<span class="token comment">-- 1.方式</span>
<span class="token keyword">SHOW</span> <span class="token keyword">INDEX</span> <span class="token keyword">FROM</span> t25
<span class="token comment">-- 2.方式</span>
<span class="token keyword">SHOW</span> INDEXES <span class="token keyword">FROM</span> t25
<span class="token comment">-- 3.方式</span>
<span class="token keyword">SHOW</span> <span class="token keyword">KEYS</span> <span class="token keyword">FROM</span> t25
<span class="token comment">-- 4.方式</span>
<span class="token keyword">DESC</span> t25
<span class="token comment">-- 创建一张订单表order (id号，商品名,订购人，数量).</span>
<span class="token comment">-- 要求id号为主键，请使用2种方式来创建主键.</span>
<span class="token comment">-- (提示:为练习方便，可以是order1 , order2 )</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">ORDER</span>
	<span class="token punctuation">(</span> id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>goods_name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	person <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	num <span class="token keyword">INT</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- 方式一</span>
	
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token keyword">ORDER</span> <span class="token keyword">ADD</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token comment">-- 方式二</span>
<span class="token comment">-- 创建一张特价菜谱表menu(id号，菜谱名,厨师，点餐人身份证，价格).</span>
<span class="token comment">-- 要求id号为主键，点餐人身份证是unique请使用两种方式</span>
<span class="token comment">-- 来创建unique.(提示:为练习方便，可以是menu1 , menu2</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> menu<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	 厨师 <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	身份证 <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span> <span class="token keyword">UNIQUE</span> <span class="token punctuation">,</span>
	price <span class="token keyword">DOUBLE</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 方式一</span>
<span class="token keyword">CREATE</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">INDEX</span> 身份证 <span class="token keyword">ON</span> menu <span class="token punctuation">(</span>身份证<span class="token punctuation">)</span>
<span class="token keyword">SHOW</span> <span class="token keyword">INDEX</span> <span class="token keyword">FROM</span> menu
<span class="token comment">-- 创建一张运动员表sportman (id号，名字，特长).</span>
<span class="token comment">-- 要求id号为主键，名字为普通索引，</span>
<span class="token comment">-- 请使用2种方式来创建索引</span>
<span class="token comment">-- (提示:为练习方便，可以是不同表名sportman1 , sportman2</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> sportman<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	hobby <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> name_index <span class="token keyword">ON</span> sportman<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span> <span class="token comment">-- 方式一</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> sportman <span class="token keyword">ADD</span> <span class="token keyword">INDEX</span> name_index<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span><span class="token comment">-- 方式二</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br></div></div><h3 id="小结-哪些列上适合使用索引"><a href="#小结-哪些列上适合使用索引" class="header-anchor">#</a> 小结：哪些列上适合使用索引</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/54.png" loading="lazy" class="lazy"></p> <h2 id="mysql事务"><a href="#mysql事务" class="header-anchor">#</a> mysql事务</h2> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/55.png" loading="lazy" class="lazy"></p> <h3 id="什么是事务"><a href="#什么是事务" class="header-anchor">#</a> 什么是事务</h3> <p><font color="#DC4040" size="4" face="黑体">事务用于保证数据的一致性,它由一组相关的dml语句组成,该组的dml语句要么全部成功，要么全部失败。如:转账就要用事务来处理,用以保证数据的一致性。</font></p> <h3 id="事务和锁"><a href="#事务和锁" class="header-anchor">#</a> 事务和锁</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/56.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 事务的一个重要的概念和具体操作</span>
<span class="token comment">-- 演示</span>
<span class="token comment">-- 1.创建一张测试表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t27<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 2.开始事务</span>
<span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span>
<span class="token comment">-- 3.设置保存点</span>
<span class="token keyword">SAVEPOINT</span> a
<span class="token comment">-- 执行dml操作</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t27 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token string">'tom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t27<span class="token punctuation">;</span>
<span class="token keyword">SAVEPOINT</span> b
<span class="token comment">-- 执行dml操作</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t27 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token string">'jack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 回退到b</span>
<span class="token keyword">ROLLBACK</span> <span class="token keyword">TO</span> b
<span class="token comment">-- 继续回退 a</span>
<span class="token keyword">ROLLBACK</span> <span class="token keyword">TO</span> a
<span class="token comment">-- 如果这样，表示直接回退到事务开始的状态</span>
<span class="token keyword">ROLLBACK</span>
<span class="token keyword">COMMIT</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="回退事务"><a href="#回退事务" class="header-anchor">#</a> 回退事务</h3> <p><font color="#DC4040" size="4" face="黑体">在介绍回退事务前，先介绍一下保存点(savepoint).保存点是事务中的点.用于取消部分事务，当结束事务时(commit),会自动的删除该事务所定义的所有保存点.当执行回退事务时，通过指定保存点可以回退到指定的点。</font></p> <h3 id="提交事务"><a href="#提交事务" class="header-anchor">#</a> 提交事务</h3> <p><font color="#DC4040" size="4" face="黑体">使用commit语句可以提交事务.当执行了commit语句子后,会确认事务的变化、结金事除徨专野放锁数据生效。当使用commit语句结束事务子后，其它会话[其他连接]将可以查着到事务变化后的新数据[所有数据就正式生效.]</font></p> <h3 id="事务细节讨论"><a href="#事务细节讨论" class="header-anchor">#</a> 事务细节讨论</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/57.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 讨论事务细节</span>
<span class="token comment">-- 1.如果不开始事务，默认情况下，dml操作是自动提交的，不能回滚</span>
<span class="token keyword">INSERT</span>	<span class="token keyword">INTO</span> t27 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token string">'milan'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 自动提交commit</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t27
<span class="token comment">-- 2.如果开始一个事务，你没有创建保存点.你可以执行rollback,</span>
<span class="token comment">-- 默认就是回退到你事务开始的状态.</span>
<span class="token keyword">START</span>	<span class="token keyword">TRANSACTION</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t27 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token string">'king'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t27 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token string">'scott'</span><span class="token punctuation">)</span>
<span class="token keyword">ROLLBACK</span> <span class="token comment">-- 表示直接回退到事务开始的状态</span>
<span class="token comment">-- 3.你也可以在这个事务中(还没有提交时),创建多个保存点.</span>
<span class="token comment">-- 比如: savepoint aaa;执行dml , savepoint bbb;</span>
<span class="token comment">-- 4.你可以在事务没有提交前，选择回退到哪个保存点.</span>
<span class="token comment">-- 5.mysql的事务机制需要innodb的存储引擎才可以使用,myisam不支持.</span>
<span class="token comment">-- 6.开始一个事务start transaction, set autocommit=off;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="mysql-事务隔离级别"><a href="#mysql-事务隔离级别" class="header-anchor">#</a> mysql 事务隔离级别</h2> <h3 id="事务隔离级别介绍"><a href="#事务隔离级别介绍" class="header-anchor">#</a> 事务隔离级别介绍</h3> <ol><li><font color="#DC4040" size="4" face="黑体">多个连接开启各自事务操作数据库中数据时，数据库系统要负责隔离操作，以保证各个连接在获取数据时的准确性。</font>（通俗解释)</li> <li>如果不考虑隔离性,可能会引发如下问题:
<ul><li><font color="#DC4040" size="4" face="黑体">脏读</font></li> <li><font color="#DC4040" size="4" face="黑体">不可重复读</font></li> <li><font color="#DC4040" size="4" face="黑体">幻读</font></li></ul></li></ol> <h3 id="查看事务隔离级别"><a href="#查看事务隔离级别" class="header-anchor">#</a> 查看事务隔离级别</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/58.png" loading="lazy" class="lazy"></p> <h3 id="事务隔离级别"><a href="#事务隔离级别" class="header-anchor">#</a> 事务隔离级别</h3> <p>概念:Mysql隔离级别定义了<strong>事务与事务之间的隔离程度。</strong></p> <table><thead><tr><th>Mysql隔离级别(4种)</th> <th>脏读</th> <th>不可重复读</th> <th>幻读</th> <th>加锁读</th></tr></thead> <tbody><tr><td>读未提交(Read uncommited)</td> <td>√</td> <td>√</td> <td>√</td> <td>不加锁</td></tr> <tr><td><strong>读已提交(Read commited)</strong></td> <td>×</td> <td>√</td> <td>√</td> <td>不加锁</td></tr> <tr><td>可重复读(Repeatable)</td> <td>×</td> <td>×</td> <td>×</td> <td>不加锁</td></tr> <tr><td><strong>可串行化(Serializable)</strong></td> <td>×</td> <td>×</td> <td>×</td> <td>加锁</td></tr></tbody></table> <p>说明：√可能出现 ×不会出现</p> <h3 id="设置事务隔离级别"><a href="#设置事务隔离级别" class="header-anchor">#</a> 设置事务隔离级别</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/59.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 演示mysql的事务隔离级别</span>
<span class="token comment">-- 1.开启两个mysql的控制台</span>
<span class="token comment">-- 2.查看当前mysql的隔离级别</span>
<span class="token keyword">SELECT</span> @<span class="token variable">@tx_isolation</span><span class="token punctuation">;</span>
<span class="token comment">-- mysql&gt; SELECT @@tx_isolation;</span>
<span class="token comment">-- +-----------------+</span>
<span class="token comment">-- | @@tx_isolation  |</span>
<span class="token comment">-- +-----------------+</span>
<span class="token comment">-- | REPEATABLE-READ |</span>
<span class="token comment">-- +-----------------+</span>
<span class="token comment">-- 3.把其中一个控制台的隔离级别设置 Read uncommitted</span>
<span class="token keyword">SET</span> <span class="token keyword">SESSION</span> <span class="token keyword">TRANSACTION</span> <span class="token keyword">ISOLATION</span> <span class="token keyword">LEVEL</span> <span class="token keyword">READ</span> <span class="token keyword">UNCOMMITTED</span>
<span class="token comment">-- mysql&gt; SELECT @@tx_isolation;</span>
<span class="token comment">-- +------------------+</span>
<span class="token comment">-- | @@tx_isolation   |</span>
<span class="token comment">-- +------------------+</span>
<span class="token comment">-- | READ-UNCOMMITTED |</span>
<span class="token comment">-- +------------------+</span>
<span class="token comment">-- 1 row in set (0.00 sec)</span>
<span class="token comment">-- 4.创建表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>account<span class="token punctuation">`</span></span><span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	money <span class="token keyword">INT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	
<span class="token comment">-- 查看当前会话隔离级别</span>
<span class="token keyword">SELECT</span> @<span class="token variable">@tx_isolation</span><span class="token punctuation">;</span>
<span class="token comment">-- 查看系统当前隔离级别</span>
<span class="token keyword">SELECT</span> @@ <span class="token keyword">global</span><span class="token punctuation">.</span>tx_isplation
<span class="token comment">-- 设置当前会话隔离级别</span>
<span class="token keyword">SET</span> <span class="token keyword">SESSION</span> <span class="token keyword">TRANSACTION</span> <span class="token keyword">ISOLATION</span> <span class="token keyword">LEVEL</span> <span class="token keyword">READ</span> <span class="token keyword">UNCOMMITTED</span>
<span class="token comment">-- 设置系统当前隔离级别</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> <span class="token keyword">TRANSACTION</span> <span class="token keyword">ISOLATION</span> <span class="token keyword">LEVEL</span> <span class="token punctuation">[</span>设置你想设置的级别<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/60.png" loading="lazy" class="lazy"></p> <p><strong>左边的事务没有提交，但是右边可以看到左边添加的100用户信息，这就是脏读</strong></p> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/61.png" loading="lazy" class="lazy"></p> <p><strong>左边的事务经过修改和添加，但是提交了，右边依然可以看到修改和添加的信息，这就是不可重复度和幻读，因为左边的提交已经直接影响到了右边的操作。</strong></p> <h2 id="mysql-事务-acid"><a href="#mysql-事务-acid" class="header-anchor">#</a> mysql 事务 ACID</h2> <h3 id="事务的-acid-特性"><a href="#事务的-acid-特性" class="header-anchor">#</a> 事务的 acid 特性</h3> <ol><li><font color="#DC4040" size="4" face="黑体">原子性(Atomicity)</font> <strong>原子性是指事务是一个不可分割的工作单位，事务中的操作要么都发生，要么都不发生。</strong></li> <li><font color="#DC4040" size="4" face="黑体">一致性(Consistency)</font> <strong>事务必须使数据库从一个一致性状态变换到另外一个一致性状态</strong></li> <li><font color="#DC4040" size="4" face="黑体">隔离性(lsolation)</font> <strong>事务的隔离性是多个用户并发访问数据库时，数据库为每一个用户开启的事务，不能被其他事务的操作数据所干扰，多个并发事务之间要相互隔离。</strong></li> <li><font color="#DC4040" size="4" face="黑体">持久性(Durability)</font> <strong>持久性是指一个事务一旦被提交，它对数据库中数据的改变就是永久性的，接下来即使数据库发生故障也不应该对其有任何影响</strong></li></ol> <h2 id="mysql-表类型和存储引擎"><a href="#mysql-表类型和存储引擎" class="header-anchor">#</a> mysql 表类型和存储引擎</h2> <h3 id="基本介绍-2"><a href="#基本介绍-2" class="header-anchor">#</a> 基本介绍</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/62.png" loading="lazy" class="lazy"></p> <h3 id="主要的存储引擎-表类型特点"><a href="#主要的存储引擎-表类型特点" class="header-anchor">#</a> 主要的存储引擎/表类型特点</h3> <table><thead><tr><th>特点</th> <th style="text-align:center;">Myism</th> <th style="text-align:center;">InnoDB</th> <th style="text-align:center;">Memory</th> <th style="text-align:center;">Archive</th></tr></thead> <tbody><tr><td>批量插入的速度</td> <td style="text-align:center;">高</td> <td style="text-align:center;">底</td> <td style="text-align:center;">高</td> <td style="text-align:center;">非常高</td></tr> <tr><td>事务安全</td> <td style="text-align:center;"></td> <td style="text-align:center;">支持</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td></tr> <tr><td>全文索引</td> <td style="text-align:center;">支持</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td> <td style="text-align:center;"></td></tr> <tr><td>锁机制</td> <td style="text-align:center;">表锁</td> <td style="text-align:center;">行锁</td> <td style="text-align:center;">表锁</td> <td style="text-align:center;">行锁</td></tr> <tr><td>存储限制</td> <td style="text-align:center;">没有</td> <td style="text-align:center;">64TB</td> <td style="text-align:center;">有</td> <td style="text-align:center;">没有</td></tr> <tr><td>B树索引</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;"></td></tr> <tr><td>哈希索引</td> <td style="text-align:center;"></td> <td style="text-align:center;">支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;"></td></tr> <tr><td>集群索引</td> <td style="text-align:center;"></td> <td style="text-align:center;">支持</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td></tr> <tr><td>数据缓存</td> <td style="text-align:center;"></td> <td style="text-align:center;">支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;"></td></tr> <tr><td>索引缓存</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;"></td></tr> <tr><td>数据可压缩</td> <td style="text-align:center;">支持</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td> <td style="text-align:center;">支持</td></tr> <tr><td>空间使用</td> <td style="text-align:center;">底</td> <td style="text-align:center;">高</td> <td style="text-align:center;">N/A</td> <td style="text-align:center;">底</td></tr> <tr><td>内存使用</td> <td style="text-align:center;">底</td> <td style="text-align:center;">高</td> <td style="text-align:center;">中等</td> <td style="text-align:center;">底</td></tr> <tr><td>支持外键</td> <td style="text-align:center;"></td> <td style="text-align:center;">支持</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td></tr></tbody></table> <h3 id="细节说明-2"><a href="#细节说明-2" class="header-anchor">#</a> 细节说明</h3> <p>重点介绍三种:MyISAM、InnoDB、MEMORY</p> <ol><li><font color="#DC4040" size="4" face="黑体">MylSAM不支持事务、也不支持外键，但其访问速度快，对事务完整性没有要求。</font></li> <li><font color="#DC4040" size="4" face="黑体">InnoDB存储引擎提供了具有提交、回滚和崩溃恢复能力的事务安全。但是比起MylSAM存储引擎，InnoDB写的处理效率差一些并且会占用更多的磁盘空间以保留数据和索引。</font></li> <li><font color="#DC4040" size="4" face="黑体">MEMORY存储引擎使用存在内存中的内容来创建表。每个MEMORY表只实际对应-个磁盘文件。MEMORY类型的表访问非常得快，因为它的数据是放在内存中的，并且默认使用HASH索引。但是一旦MySQL服务关闭，表中的数据就会丢失掉,表的结构还在。</font></li></ol> <h3 id="三种存储引擎表使用案例"><a href="#三种存储引擎表使用案例" class="header-anchor">#</a> 三种存储引擎表使用案例</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 查看所有的存储引擎</span>
<span class="token keyword">SHOW</span> ENGINES
<span class="token comment">-- innodb 存储引擎，是前面使用过</span>
<span class="token comment">-- 1.支持事务 2.支持外键 3.支持行级锁</span>
<span class="token comment">-- myisam 存储引擎</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t28<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span> MYISAM
	
<span class="token comment">-- 1.添加速度快 2.不支持外键和事务 3.支持表级锁</span>
<span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span>
<span class="token keyword">SAVEPOINT</span> t1
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t28 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'jack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token keyword">FROM</span> t28
<span class="token keyword">ROLLBACK</span> <span class="token keyword">TO</span> t1 <span class="token comment">-- 没有回滚成功</span>
<span class="token comment">-- memory 存储引擎</span>
<span class="token comment">-- 1.数据存储在内存中[关闭mysql服务，数据丢失，但是表结构还在] </span>
<span class="token comment">-- 2.执行速度很快(没有IO读写) 3.默认支持索引(hash表)</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t29<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span> MEMORY
	
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t29
	<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'tom'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'jack'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'frx'</span><span class="token punctuation">)</span>
	
<span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token keyword">FROM</span> t29
<span class="token comment">-- 修改存储引擎</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t29 <span class="token keyword">ENGINE</span> <span class="token operator">=</span><span class="token keyword">INNODB</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="如何选择表的存储引擎"><a href="#如何选择表的存储引擎" class="header-anchor">#</a> 如何选择表的存储引擎</h3> <ol><li><font color="#DC4040" size="4" face="黑体">如果你的应用不需要事务，处理的只是基本的CRUD操作，那么MylSAN是不二选择,速度快</font></li> <li><font color="#DC4040" size="4" face="黑体">如果需要支持事务，选择lnnoDB.</font></li> <li><font color="#DC4040" size="4" face="黑体">Memory存储引擎就是将数据存储在内存中，由于没有磁盘I./O的等待速度极快。但由于是内存存储引擎，所做的任何修改在服务器重启后都将消失。</font>(经典用法 用户的在线状态().)</li></ol> <h2 id="视图-view"><a href="#视图-view" class="header-anchor">#</a> 视图(view)</h2> <h3 id="看需求"><a href="#看需求" class="header-anchor">#</a> 看需求</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/63.png" loading="lazy" class="lazy"></p> <h3 id="基本概念"><a href="#基本概念" class="header-anchor">#</a> 基本概念</h3> <ol><li><font color="#DC4040" size="4" face="黑体">视图是一个虚拟表，其内容由查询定义。同真实的表一样，视图包含列,其数据来自对应的真实表(基表)</font></li> <li>视图和基表关系的示意图</li></ol> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/64.png" loading="lazy" class="lazy"></p> <h3 id="视图的基本使用"><a href="#视图的基本使用" class="header-anchor">#</a> 视图的基本使用</h3> <ol><li><font color="#DC4040" size="4" face="黑体">create view视图名as select语句</font></li> <li><font color="#DC4040" size="4" face="黑体">alter view视图名as select语句   --更新成新的视图</font></li> <li><font color="#DC4040" size="4" face="黑体">SHOW CREATE VIEW 视图名</font></li> <li><font color="#DC4040" size="4" face="黑体">drop view视图名1,视图名2</font></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 视图的使用</span>
<span class="token comment">-- 创建一个视图 emp_view01,只能查询emp表的(emp、ename、job和deptno)信息</span>
<span class="token comment">-- 创建视图</span>
<span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> emp_view01
	<span class="token keyword">AS</span>
	<span class="token keyword">SELECT</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>job<span class="token punctuation">,</span>deptno <span class="token keyword">FROM</span> emp<span class="token punctuation">;</span>
	
	
<span class="token comment">-- 查看视图</span>
<span class="token keyword">DESC</span> emp_view01
<span class="token keyword">SELECT</span>  <span class="token operator">*</span> <span class="token keyword">FROM</span> emp_view01
<span class="token keyword">SELECT</span> empno<span class="token punctuation">,</span>job <span class="token keyword">FROM</span> emp_view01<span class="token punctuation">;</span>
<span class="token comment">-- 查看创建视图的指令</span>
<span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> emp_view01
<span class="token comment">-- 删除视图</span>
<span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> emp_view01
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="视图细节讨论"><a href="#视图细节讨论" class="header-anchor">#</a> 视图细节讨论</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/65.png" loading="lazy" class="lazy"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 视图的细节</span>
<span class="token comment">-- 1.创建视图后，到数据库去看，对应视图只有一个视图结构文件(形式:视图名.frm)</span>
<span class="token comment">-- 2.视图的数据变化会影响到基表，基表的数据变化也会影响到视图[insert update delete ]</span>
<span class="token comment">-- 修改视图</span>
<span class="token keyword">UPDATE</span> emp_view01 
	<span class="token keyword">SET</span> job<span class="token operator">=</span><span class="token string">'manager'</span> 
	<span class="token keyword">WHERE</span> empno<span class="token operator">=</span><span class="token number">7369</span>
	
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp_view01
<span class="token comment">-- 修改基本表，会影响到视图</span>
<span class="token keyword">UPDATE</span>  emp
	<span class="token keyword">SET</span> job<span class="token operator">=</span><span class="token string">'SALESMAN'</span>
	<span class="token keyword">WHERE</span> empno<span class="token operator">=</span><span class="token number">7369</span>
	
	
<span class="token comment">-- 3.视图中可以使用视图，比如emp_view 01视图中，选出empno,和ename 作出新视图</span>
 <span class="token keyword">DESC</span>	emp_view01
 <span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> emp_view02
	<span class="token keyword">AS</span>
	<span class="token keyword">SELECT</span> empno<span class="token punctuation">,</span>ename <span class="token keyword">FROM</span> emp_view01
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp_view02
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="视图最佳实践"><a href="#视图最佳实践" class="header-anchor">#</a> 视图最佳实践</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/66.png" loading="lazy" class="lazy"></p> <h3 id="视图课堂练习"><a href="#视图课堂练习" class="header-anchor">#</a> 视图课堂练习</h3> <blockquote><p>针对emp , dept,和salgrade张三表.创建一个视图emp_view03，可以显示雇员编号，雇员名，雇员部门名称和薪水级别[即使用三张表，构建一个视图] view02.sql</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 视图的练习</span>
<span class="token comment">-- 针对 emp,dept,和salgrade 张三表，创建一个视图 emp_view03</span>
<span class="token comment">-- 可以显示雇员编号，雇员名，雇员部门名称和薪水级别[即使用三张表，构建一个视图] view02.sql</span>
<span class="token comment">/*
分析：使用三表联合查询，得到结果
*/</span>
<span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> emp_view03
	<span class="token keyword">AS</span>
    <span class="token keyword">SELECT</span>  empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>dname<span class="token punctuation">,</span>grade
	<span class="token keyword">FROM</span> emp<span class="token punctuation">,</span>dept<span class="token punctuation">,</span>salgrade 
	<span class="token keyword">WHERE</span> emp<span class="token punctuation">.</span>deptno<span class="token operator">=</span>dept<span class="token punctuation">.</span>deptno <span class="token operator">AND</span> 
	<span class="token punctuation">(</span>sal <span class="token operator">BETWEEN</span> losal <span class="token operator">AND</span> hisal<span class="token punctuation">)</span>
	
<span class="token keyword">DESC</span> emp_view03
<span class="token keyword">SELECT</span>  <span class="token operator">*</span> <span class="token keyword">FROM</span> emp_view03
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="mysql管理"><a href="#mysql管理" class="header-anchor">#</a> Mysql管理</h2> <h3 id="mysql-用户"><a href="#mysql-用户" class="header-anchor">#</a> Mysql 用户</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/67.png" loading="lazy" class="lazy"></p> <p>!<img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/68.png" loading="lazy" class="lazy"></p> <h3 id="创建用户"><a href="#创建用户" class="header-anchor">#</a> 创建用户</h3> <p><font color="#DC4040" size="4" face="黑体">create user  '用户名 '@'允许登录位置'identified by   ‘密码'  </font></p> <p>说明:创建用户,同时指定密码</p> <h3 id="删除用户"><a href="#删除用户" class="header-anchor">#</a> 删除用户</h3> <p><font color="#DC4040" size="4" face="黑体">drop user ‘用户名’@’允许登录位置’;</font></p> <h3 id="用户修改密码"><a href="#用户修改密码" class="header-anchor">#</a> 用户修改密码</h3> <p>修改自己的密码:
<font color="#DC4040" size="4" face="黑体">set password = password('密码');</font>
修改他人的密码（需要有修改用户密码权限):
<font color="#DC4040" size="4" face="黑体">set password for '用户名'@'登录位置'= password(密码');</font></p> <h3 id="mysql中的权限"><a href="#mysql中的权限" class="header-anchor">#</a> mysql中的权限</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/71.png" loading="lazy" class="lazy"></p> <h3 id="给用户授权"><a href="#给用户授权" class="header-anchor">#</a> 给用户授权</h3> <p><img alt="04" data-src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/studynotes/MySQL/images/70.png" loading="lazy" class="lazy"></p> <h3 id="回收用户权限"><a href="#回收用户权限" class="header-anchor">#</a> 回收用户权限</h3> <p>基本语法：<font color="#DC4040" size="4" face="黑体">revoke权限列表on库.对象名from '用户名&quot;@&quot;登录位置';</font></p> <h3 id="权限生效指令"><a href="#权限生效指令" class="header-anchor">#</a> 权限生效指令</h3> <p>如果权限没有生效，可以执行下面命令.</p> <ul><li>基本语法:
<font color="#DC4040" size="4" face="黑体">FLUSH PRIVILEGES;</font></li></ul> <h3 id="课堂练习题"><a href="#课堂练习题" class="header-anchor">#</a> 课堂练习题</h3> <blockquote><p>创建一个用户(你的名字，拼音)，密码123，并且只可以从本地登录，不让远程登录mysql
创建库和表testdb下的news表,要求:使用root用户创建
给用户分配查看news表和添加数据的权限
测试看看用户是否只有这几个权限
修改密码为abc ,要求:使用root用户完成重新登录
示回收权限
使用root 用户删除你的用户 演示回收权限</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 演示用户权限的管理</span>
<span class="token comment">-- 创建用户 rongxu 密码 123，从本地登录</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'rongxu'</span><span class="token variable">@'localhost '</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'123'</span>
<span class="token comment">-- 使用root 用户创建 testdb，表news</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> testdb
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> news<span class="token punctuation">(</span>	
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	content <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	
<span class="token comment">-- 添加一条测试数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> news <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token string">'北京新闻'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> news
<span class="token comment">-- 给 rongxu 分配查看 news 表和添加news的权限</span>
<span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span><span class="token keyword">INSERT</span>
	<span class="token keyword">ON</span> testdb<span class="token punctuation">.</span>news
	<span class="token keyword">TO</span> <span class="token string">'rongxu'</span><span class="token variable">@'localhost'</span>
	
<span class="token comment">-- 可以增加权限</span>
<span class="token keyword">GRANT</span> <span class="token keyword">UPDATE</span>
	<span class="token keyword">ON</span> testdb<span class="token punctuation">.</span>news
	<span class="token keyword">TO</span> <span class="token string">'rongxu'</span><span class="token variable">@'localhost'</span>
	
<span class="token comment">-- 修改rongxu密码为abc</span>
<span class="token keyword">SET</span> PASSWORD <span class="token keyword">FOR</span> <span class="token string">'rongxu'</span><span class="token variable">@'localhost'</span> <span class="token operator">=</span>PASSWORD<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span>
<span class="token comment">-- 回收rongxu用户在testdb.news表的所有权限</span>
<span class="token keyword">REVOKE</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span><span class="token keyword">UPDATE</span><span class="token punctuation">,</span><span class="token keyword">INSERT</span> <span class="token keyword">ON</span> testdb<span class="token punctuation">.</span>news <span class="token keyword">FROM</span> <span class="token string">'rongxu'</span><span class="token variable">@'localhost'</span>
<span class="token keyword">REVOKE</span> <span class="token keyword">ALL</span> testdb<span class="token punctuation">.</span>news <span class="token keyword">FROM</span> <span class="token string">'rongxu'</span><span class="token variable">@'localhost'</span>
<span class="token comment">-- 删除 rongxu用户</span>
<span class="token keyword">DROP</span> <span class="token keyword">USER</span> <span class="token string">'rongxu'</span><span class="token variable">@'localhost'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="细节说明-3"><a href="#细节说明-3" class="header-anchor">#</a> 细节说明</h3> <ol><li><font color="#DC4040" size="4" face="黑体">在创建用户的时候，如果不指定Host,则为%，%表示表示所有IP都有连接权限create user XXX;</font></li> <li><font color="#DC4040" size="4" face="黑体">你也可以这样指定 create user 'xxx' @'192.168.1.%’表示xxx用户在192.168.1.*的ip可以登录mysql</font></li> <li><font color="#DC4040" size="4" face="黑体">在删除用户的时候，如果host 不是%,需要明确指定‘用户'@'host值'</font></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 在创建用户的时候，如果不指定Host,则为%，%表示表示所有IP都有连接权限</span>
<span class="token comment">-- create user xXx;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> jack<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token identifier"><span class="token punctuation">`</span>host<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>user<span class="token punctuation">`</span></span> <span class="token keyword">FROM</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span>
<span class="token comment">-- 你也可以这样指定</span>
<span class="token comment">-- create user 'xxx' @'192.168.1.%’表示 xxx用户在192.168.1.*的ip可以登录mysql</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'smith'</span><span class="token variable">@'192.168.1.%'</span>
<span class="token comment">-- 在删除用户的时候，如果host 不是%,需要明确指定‘用户'@'host值'</span>
<span class="token keyword">DROP</span> <span class="token keyword">USER</span> jack  <span class="token comment">-- 默认就是 DROP USER 'jack'@'%'</span>
<span class="token keyword">DROP</span> <span class="token keyword">USER</span> <span class="token string">'smith'</span><span class="token variable">@'192.168.1.%'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/xustudyxu/xustudyxu.github.io/edit/master/docs/studynotes/database/MySQL/MySQL.md" target="_blank" rel="noopener noreferrer">帮助我改善此页面</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=MySQL" title="标签">#MySQL</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022年7月1日</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><!----> <a href="/pages/7ab056/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">非关系型数据库</div></a></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/pages/7ab056/">非关系型数据库</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/Spring/SpringCloud/Seata_/"><div>
            Seata 分布式事务
            <!----></div></a> <span class="date">08-31</span></dt></dl><dl><dd>02</dd> <dt><a href="/Spring/SpringCloud/Sentinel_/"><div>
            Sentinel 实现熔断与限流
            <!----></div></a> <span class="date">08-26</span></dt></dl><dl><dd>03</dd> <dt><a href="/Spring/SpringCloud/Nacos_/"><div>
            Nacos 服务发现、配置管理和服务管理平台
            <!----></div></a> <span class="date">08-24</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1812903531@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/xustudyxu" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://frxcat.fun/img/wx.png" title="微信" target="_blank" class="iconfont icon-weixin"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2022
    <span>xustudyxu |<a href="https://beian.miit.gov.cn" target="_blank">豫ICP备2022008983号</a><br>	<a href="https://imgtu.com/i/XQkn6x"><img src="https://s1.ax1x.com/2022/05/29/XQkn6x.png" alt="XQkn6x.png" border="0" /></a>	 		<a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41018302000331" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;"><img src="" style="float:left;"/><p style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px;">豫公网安备 41018302000331号</p></a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><APlayer audio="" fixed="true" mini="true" theme="#b7daff" loop="loop" order="list" preload="auto" volume="0.7" mutex="true" lrc-type="0" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><div></div><div></div><div></div><div id="tcomment"></div><!----></div></div>
    <script src="/assets/js/app.b0983bf9.js" defer></script><script src="/assets/js/2.f07a9fcd.js" defer></script><script src="/assets/js/167.4922f385.js" defer></script><script src="/assets/js/5.8c6a5cb9.js" defer></script><script src="/assets/js/13.671a58b6.js" defer></script><script src="/assets/js/14.8128dda5.js" defer></script><script src="/assets/js/9.adcbe568.js" defer></script><script src="/assets/js/10.92006054.js" defer></script>
  </body>
</html>
